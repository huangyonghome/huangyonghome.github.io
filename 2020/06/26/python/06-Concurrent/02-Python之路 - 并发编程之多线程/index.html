<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "59f7787a"
    });
  daovoice('update');
  </script>















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="Jesse's home" type="application/atom+xml" />






<meta name="description" content="Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ãÂâçË®Ä  üçÄÂú®‰∏ä‰∏ÄÁØá‰∏≠ËØ¥‰∫Ü‰∏ÄÂ§ßÂ†ÜÁêÜËÆ∫ , ÈÇ£‰πàÁé∞Âú®Â∞±ÂºÄÂßãÂÆûË∑µ‰∫Ü  ÂÖàËØ¥Á∫øÁ®ãÂÜçËØ¥ËøõÁ®ã , ‰∏∫‰ªÄ‰πà ?  Âõ†‰∏∫Âú®Python‰∏≠Êúâ‰∏Ä‰∏™Python GILÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ , ËøôÊòØ‰∏™‰ªÄ‰πà‰∏úË•ø? ÊúÄÂêéÊù•ËØ¥ ÊÄª‰πãÁ∫øÁ®ãÂíåËøõÁ®ãÈÉΩÊòØ‰∏éÊìç‰ΩúÁ≥ªÁªüÊúâÂÖ≥ÁöÑÁü•ËØÜ , ÊâÄ‰ª•Êìç‰ΩúÁ≥ªÁªüÂü∫Á°Ä , ÂØπ‰∫éËøô‰∏§ËäÇÂÜÖÂÆπÁöÑÁêÜËß£‰ºöÊúâÂæàÂ§ßÁöÑÂ∏ÆÂä© Threading  üçÄPythonÈÄöËøá‰∏§‰∏™Ê†áÂáÜÂ∫ì_thread (b">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã">
<meta property="og:url" content="https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/index.html">
<meta property="og:site_name" content="Jesse&#39;s home">
<meta property="og:description" content="Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ãÂâçË®Ä  üçÄÂú®‰∏ä‰∏ÄÁØá‰∏≠ËØ¥‰∫Ü‰∏ÄÂ§ßÂ†ÜÁêÜËÆ∫ , ÈÇ£‰πàÁé∞Âú®Â∞±ÂºÄÂßãÂÆûË∑µ‰∫Ü  ÂÖàËØ¥Á∫øÁ®ãÂÜçËØ¥ËøõÁ®ã , ‰∏∫‰ªÄ‰πà ?  Âõ†‰∏∫Âú®Python‰∏≠Êúâ‰∏Ä‰∏™Python GILÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ , ËøôÊòØ‰∏™‰ªÄ‰πà‰∏úË•ø? ÊúÄÂêéÊù•ËØ¥ ÊÄª‰πãÁ∫øÁ®ãÂíåËøõÁ®ãÈÉΩÊòØ‰∏éÊìç‰ΩúÁ≥ªÁªüÊúâÂÖ≥ÁöÑÁü•ËØÜ , ÊâÄ‰ª•Êìç‰ΩúÁ≥ªÁªüÂü∫Á°Ä , ÂØπ‰∫éËøô‰∏§ËäÇÂÜÖÂÆπÁöÑÁêÜËß£‰ºöÊúâÂæàÂ§ßÁöÑÂ∏ÆÂä© Threading  üçÄPythonÈÄöËøá‰∏§‰∏™Ê†áÂáÜÂ∫ì_thread (b">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-06-30T12:32:51.229Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã">
<meta name="twitter:description" content="Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ãÂâçË®Ä  üçÄÂú®‰∏ä‰∏ÄÁØá‰∏≠ËØ¥‰∫Ü‰∏ÄÂ§ßÂ†ÜÁêÜËÆ∫ , ÈÇ£‰πàÁé∞Âú®Â∞±ÂºÄÂßãÂÆûË∑µ‰∫Ü  ÂÖàËØ¥Á∫øÁ®ãÂÜçËØ¥ËøõÁ®ã , ‰∏∫‰ªÄ‰πà ?  Âõ†‰∏∫Âú®Python‰∏≠Êúâ‰∏Ä‰∏™Python GILÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ , ËøôÊòØ‰∏™‰ªÄ‰πà‰∏úË•ø? ÊúÄÂêéÊù•ËØ¥ ÊÄª‰πãÁ∫øÁ®ãÂíåËøõÁ®ãÈÉΩÊòØ‰∏éÊìç‰ΩúÁ≥ªÁªüÊúâÂÖ≥ÁöÑÁü•ËØÜ , ÊâÄ‰ª•Êìç‰ΩúÁ≥ªÁªüÂü∫Á°Ä , ÂØπ‰∫éËøô‰∏§ËäÇÂÜÖÂÆπÁöÑÁêÜËß£‰ºöÊúâÂæàÂ§ßÁöÑÂ∏ÆÂä© Threading  üçÄPythonÈÄöËøá‰∏§‰∏™Ê†áÂáÜÂ∫ì_thread (b">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Âçö‰∏ª'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/"/>





  <title>41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã | Jesse's home</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jesse's home</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            ÂÖ≥‰∫é
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Ê†áÁ≠æ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            ÂΩíÊ°£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jesse">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jesse's home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              
              <time title="ÂàõÂª∫‰∫é" itemprop="dateCreated datePublished" datetime="2020-06-26T09:20:58+08:00">
                2020-06-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
                  Ôºå 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/06-Concurrent/" itemprop="url" rel="index">
                    <span itemprop="name">06-Concurrent</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Python‰πãË∑Ø-Â§öÁ∫øÁ®ãÁºñÁ®ã"><a href="#Python‰πãË∑Ø-Â§öÁ∫øÁ®ãÁºñÁ®ã" class="headerlink" title="Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã"></a>Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã</h1><h2 id="ÂâçË®Ä-üçÄ"><a href="#ÂâçË®Ä-üçÄ" class="headerlink" title="ÂâçË®Ä  üçÄ"></a>ÂâçË®Ä  üçÄ</h2><p>Âú®‰∏ä‰∏ÄÁØá‰∏≠ËØ¥‰∫Ü‰∏ÄÂ§ßÂ†ÜÁêÜËÆ∫ , ÈÇ£‰πàÁé∞Âú®Â∞±ÂºÄÂßãÂÆûË∑µ‰∫Ü </p>
<p>ÂÖàËØ¥Á∫øÁ®ãÂÜçËØ¥ËøõÁ®ã , ‰∏∫‰ªÄ‰πà ?  Âõ†‰∏∫Âú®Python‰∏≠Êúâ‰∏Ä‰∏™<code>Python GIL</code>ÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ , ËøôÊòØ‰∏™‰ªÄ‰πà‰∏úË•ø? ÊúÄÂêéÊù•ËØ¥</p>
<p>ÊÄª‰πãÁ∫øÁ®ãÂíåËøõÁ®ãÈÉΩÊòØ‰∏éÊìç‰ΩúÁ≥ªÁªüÊúâÂÖ≥ÁöÑÁü•ËØÜ , ÊâÄ‰ª•Êìç‰ΩúÁ≥ªÁªüÂü∫Á°Ä , ÂØπ‰∫éËøô‰∏§ËäÇÂÜÖÂÆπÁöÑÁêÜËß£‰ºöÊúâÂæàÂ§ßÁöÑÂ∏ÆÂä©</p>
<h2 id="Threading-üçÄ"><a href="#Threading-üçÄ" class="headerlink" title="Threading  üçÄ"></a>Threading  üçÄ</h2><p>PythonÈÄöËøá‰∏§‰∏™Ê†áÂáÜÂ∫ì<code>_thread</code> (built-in) Âíå<code>threading</code>Êèê‰æõÂØπÁ∫øÁ®ãÁöÑÊîØÊåÅ , threadingÂØπ_threadËøõË°å‰∫ÜÂ∞ÅË£Ö</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_thread.py</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">This module provides primitive operations to write multi-threaded programs.</span></span><br><span class="line"><span class="string">The 'threading' module provides a more convenient interface.</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>So , ÊòéÊòæÊàë‰ª¨‰∏ÄËà¨Áõ¥Êé•‰ΩøÁî®threading</p>
<p>threadingÊ®°Âùó‰∏≠Êèê‰æõ‰∫ÜThread , Lock , RLock , Semaphore , Event , Condition , TimerÁ≠âÁªÑ‰ª∂</p>
<a id="more"></a>
<h2 id="Thread-üçÄ"><a href="#Thread-üçÄ" class="headerlink" title="Thread  üçÄ"></a>Thread  üçÄ</h2><p>ÂèÇÊï∞ËØ¥Êòé</p>
<table>
<thead>
<tr>
<th>ÂèÇÊï∞</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>group</td>
<td>Êú™‰ΩøÁî® , ÂÄºÂßãÁªà</td>
</tr>
<tr>
<td>target</td>
<td>Ë°®Á§∫Ë∞ÉÁî®ÂØπË±° , Âç≥Â≠êÁ∫øÁ®ãË¶ÅÊâßË°åÁöÑ‰ªªÂä°</td>
</tr>
<tr>
<td>name</td>
<td>Â≠êÁ∫øÁ®ãÁöÑÂêçÁß∞</td>
</tr>
<tr>
<td>args</td>
<td>‰º†ÂÖ•targetÂáΩÊï∞‰∏≠ÁöÑ‰ΩçÁΩÆÂèÇÊï∞ , ÊòØ‰∏Ä‰∏™ÂÖÉÁªÑ , ÂèÇÊï∞ÂêéÂøÖÈ°ªÂä†ÈÄóÂè∑</td>
</tr>
<tr>
<td>kwargs</td>
<td>Ë°®Á§∫Ë∞ÉÁî®ÂØπË±°ÁöÑÂ≠óÂÖ∏</td>
</tr>
</tbody>
</table>
<p>ÊñπÊ≥ïËØ¥Êòé</p>
<table>
<thead>
<tr>
<th>ÊñπÊ≥ï</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>Thread.run (self)</td>
<td>ËøõÁ®ãÂêØÂä®Êó∂ËøêË°åÁöÑÊñπÊ≥ï , Áî±ËØ•ÊñπÊ≥ïË∞ÉÁî®targetÂèÇÊï∞ÊâÄÊåáÂÆöÁöÑÂáΩÊï∞ , Âú®Â≠êÁ±ª‰∏≠ÂèØ‰ª•ËøõË°åÈáçÊûÑ , ‰∏éÁ∫øÁ®ã‰∏≠‰∏ÄÊ†∑</td>
</tr>
<tr>
<td>Thread.start (self)</td>
<td>ÂêØÂä®ËøõÁ®ã , startÊñπÊ≥ïÂ∞±ÊòØÂéªÂ∏Æ‰Ω†Ë∞ÉÁî®runÊñπÊ≥ï</td>
</tr>
<tr>
<td>Thread.terminate (self)</td>
<td>Âº∫Âà∂ÁªàÊ≠¢Á∫øÁ®ã , ‰∏ç‰ºöËøõË°å‰ªª‰ΩïÊ∏ÖÁêÜÊìç‰Ωú , ‰ΩøÁî®Êó∂ÈúÄÂ∞èÂøÉÂÖ∂Â≠êËøõÁ®ã‰∏éÈîÅÁöÑÈóÆÈ¢ò</td>
</tr>
<tr>
<td>Thread.join (self, timeout=None)</td>
<td>ÈòªÂ°ûË∞ÉÁî® , ‰∏ªÁ∫øÁ®ãËøõË°åÁ≠âÂæÖ , timeout‰∏∫Ë∂ÖÊó∂Êó∂Èó¥</td>
</tr>
<tr>
<td>Thread.is_alive (self)</td>
<td>Ëøô‰∏™ÊñπÊ≥ïÂú®run()ÊñπÊ≥ïÂºÄÂßã‰πãÂâçËøîÂõûTrue , Âú®run()ÊñπÊ≥ïÁªìÊùü‰πãÂêé , ËøîÂõûÊâÄÊúâÊ¥ªÂä®Á∫øÁ®ãÁöÑÂàóË°®</td>
</tr>
<tr>
<td>Thread.isDaemon(self)</td>
<td>Âà§Êñ≠ÊòØÂê¶‰∏∫ÂÆàÊä§Á∫øÁ®ã , ËøîÂõûboolÂÄº</td>
</tr>
<tr>
<td>Thread.setDaemon(self,daemonic)</td>
<td>Â∞ÜÂ≠êÁ∫øÁ®ãËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ã , daemonic = daemon</td>
</tr>
<tr>
<td>Thread.getName(self,name)</td>
<td>Ëé∑ÂèñÁ∫øÁ®ãÂêçÁß∞</td>
</tr>
<tr>
<td>Thread.setName(self,name)</td>
<td>ËÆæÁΩÆÁ∫øÁ®ãÂêçÁß∞</td>
</tr>
</tbody>
</table>
<p>ÂÆû‰æãÂ±ûÊÄßËØ¥Êòé</p>
<table>
<thead>
<tr>
<th>Â±ûÊÄß</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>Thread.daemon</td>
<td>ÈªòËÆ§ÂÄº‰∏∫False , TrueÂàô‰∏∫ÂÆàÊä§Á∫øÁ®ã</td>
</tr>
<tr>
<td>Thread.name</td>
<td>Á∫øÁ®ãÁöÑÂêçÁß∞</td>
</tr>
<tr>
<td>Thread.isAlive</td>
<td>Âç≥‰∏∫is_aliveÁöÑËøîÂõûÂÄº</td>
</tr>
<tr>
<td>Thread.ident</td>
<td>Á∫øÁ®ãÊ†áËØÜÁ¨¶ , Ê≤°ÂêØÂä®Âàô‰∏∫None</td>
</tr>
</tbody>
</table>
<p><strong>ÂàõÂª∫Á∫øÁ®ã</strong>  </p>
<p>Python‰∏≠‰ΩøÁî®Á∫øÁ®ãÊúâ‰∏§ÁßçÊñπÂºè : ÂáΩÊï∞ÊàñËÄÖÁî®Á±ªÊù•ÂåÖË£ÖÁ∫øÁ®ãÂØπË±°</p>
<p>ÂáΩÊï∞Ë∞ÉÁî®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># ÂÆö‰πâÁ∫øÁ®ãË¶ÅËøêË°åÁöÑÂáΩÊï∞</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    <span class="comment"># ‰∏∫‰∫Ü‰æø‰∫éËßÇÂØü,ËÆ©ÂÆÉÁù°‰∏ä2Áßí</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Èò≤Ê≠¢Ë¢´ÂØºÂÖ•ÊâßË°å‰∏§Ê¨°</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã,argsÂèÇÊï∞ÊòØ‰∏Ä‰∏™ÂÖÉÁªÑ,ÂøÖÈ°ªÂä†ÈÄóÂè∑</span></span><br><span class="line">    t1 = threading.Thread(target=func, args=(<span class="string">"Lyon"</span>,))</span><br><span class="line">    <span class="comment"># ÂÜçÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">    t2 = threading.Thread(target=func, args=(<span class="string">"Kenneth"</span>,))</span><br><span class="line">    <span class="comment"># ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">    t1.start()</span><br><span class="line">    <span class="comment"># ÂêØÂä®Âè¶‰∏Ä‰∏™Á∫øÁ®ã</span></span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="comment"># ÊâìÂç∞Á∫øÁ®ãÂêç</span></span><br><span class="line">    print(t1.getName())</span><br><span class="line">    <span class="comment"># ÊâìÂç∞Á∫øÁ®ãÂêç</span></span><br><span class="line">    print(t2.getName())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">Thread-1</span></span><br><span class="line"><span class="string">Thread-2</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Á±ªÁªßÊâøË∞ÉÁî®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># ÁªßÊâøthreading‰∏≠ÁöÑThreadÁ±ª</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="comment"># Á∫øÁ®ã‰∏≠ÊâÄÈúÄË¶ÅÁöÑÂèÇÊï∞</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="comment"># threading.Thread.__init__(self)</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.name = name</span><br><span class="line">	<span class="comment"># ÈáçÊûÑrunÊñπÊ≥ï,Ê≥®ÊÑèËøô‰∏™ÊòØË°®Á§∫Á∫øÁ®ãÊ¥ªÂä®ÁöÑÊñπÊ≥ï,ÂøÖÈ°ªÊúâ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"I am %s"</span> % self.name)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Èò≤Ê≠¢Ë¢´ÂØºÂÖ•ÊâßË°å‰∏§Ê¨°</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">    t1 = MyThread(<span class="string">'Lyon'</span>)</span><br><span class="line">    <span class="comment"># ÂàõÂª∫Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">    t2 = MyThread(<span class="string">'Kenneth'</span>)</span><br><span class="line">    <span class="comment"># ÂêØÂä®Á∫øÁ®ã,Ë∞ÉÁî®‰∫ÜÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ï</span></span><br><span class="line">    t1.start()</span><br><span class="line">    <span class="comment"># ÂêØÂä®Âè¶‰∏Ä‰∏™Á∫øÁ®ã</span></span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="comment"># Ëé∑ÂèñÁ∫øÁ®ãÂêç</span></span><br><span class="line">    print(t1.getName())</span><br><span class="line">    <span class="comment"># Ëé∑ÂèñÁ∫øÁ®ãÂêç</span></span><br><span class="line">    print(t2.getName())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú: </span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">Lyon</span></span><br><span class="line"><span class="string">Kenneth</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ThreadÂÆû‰æãÂØπË±°ÁöÑÊñπÊ≥ï</span><br><span class="line">  # isAlive(): ËøîÂõûÁ∫øÁ®ãÊòØÂê¶Ê¥ªÂä®ÁöÑ„ÄÇ</span><br><span class="line">  # getName(): ËøîÂõûÁ∫øÁ®ãÂêç„ÄÇ</span><br><span class="line">  # setName(): ËÆæÁΩÆÁ∫øÁ®ãÂêç„ÄÇ</span><br><span class="line">threadingÊ®°ÂùóÊèê‰æõÁöÑ‰∏Ä‰∫õÊñπÊ≥ïÔºö</span><br><span class="line">  # threading.currentThread(): ËøîÂõûÂΩìÂâçÁöÑÁ∫øÁ®ãÂèòÈáè„ÄÇ</span><br><span class="line">  # threading.enumerate(): ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÁöÑlist„ÄÇÊ≠£Âú®ËøêË°åÊåáÁ∫øÁ®ãÂêØÂä®Âêé„ÄÅÁªìÊùüÂâçÔºå‰∏çÂåÖÊã¨ÂêØÂä®ÂâçÂíåÁªàÊ≠¢ÂêéÁöÑÁ∫øÁ®ã„ÄÇ</span><br><span class="line">  # threading.activeCount(): ËøîÂõûÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÔºå‰∏élen(threading.enumerate())ÊúâÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ</span><br></pre></td></tr></table></figure>
<h2 id="Join-amp-setDaemon-üçÄ"><a href="#Join-amp-setDaemon-üçÄ" class="headerlink" title="Join &amp; setDaemon  üçÄ"></a>Join &amp; setDaemon  üçÄ</h2><p>Âú®ËØ¥Ëøô‰∏§‰∏™ÊñπÊ≥ï‰πãÂâç , ÈúÄË¶ÅÁü•ÈÅì‰∏ªÁ∫øÁ®ã‰∏éÂ≠êÁ∫øÁ®ãÁöÑÊ¶ÇÂøµ</p>
<p>‰∏ªÁ∫øÁ®ã : ÂΩì‰∏Ä‰∏™Á®ãÂ∫èÂêØÂä®Êó∂ , Â∞±Êúâ‰∏Ä‰∏™ËøõÁ®ãË¢´Êìç‰ΩúÁ≥ªÁªüÂàõÂª∫ , ‰∏éÊ≠§ÂêåÊó∂‰∏Ä‰∏™Á∫øÁ®ã‰πüÁ´ãÂàªËøêË°å , ËØ•Á∫øÁ®ãÈÄöÂ∏∏Âè´ÂÅöÁ®ãÂ∫èÁöÑ‰∏ªÁ∫øÁ®ã</p>
<p>Â≠êÁ∫øÁ®ã : Âõ†‰∏∫Á®ãÂ∫èÊòØÂºÄÂßãÊó∂Â∞±ÊâßË°åÁöÑ , Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÜçÂàõÂª∫Á∫øÁ®ã , ÈÇ£‰πàÂàõÂª∫ÁöÑÁ∫øÁ®ãÂ∞±ÊòØËøô‰∏™‰∏ªÁ∫øÁ®ãÁöÑÂ≠êÁ∫øÁ®ã</p>
<p><code>‰∏ªÁ∫øÁ®ãÁöÑÈáçË¶ÅÊÄß‰ΩìÁé∞Âú®‰∏§ÊñπÈù¢ : 1. ÊòØ‰∫ßÁîüÂÖ∂‰ªñÂ≠êÁ∫øÁ®ãÁöÑÁ∫øÁ®ã ; 2. ÈÄöÂ∏∏ÂÆÉÂøÖÈ°ªÊúÄÂêéÂÆåÊàêÊâßË°åÊØîÂ¶ÇÊâßË°åÂêÑÁßçÂÖ≥Èó≠‰Ωú</code> </p>
<p><code>Âú®Python‰∏≠Á∫øÁ®ãÁöÑ‰∏Ä‰∫õÊú∫Âà∂‰∏éC/C++‰∏çÂêå , Âú®C/C++‰∏≠ , ‰∏ªÁ∫øÁ®ãÁªìÊùüÂêé , ÂÖ∂Â≠êÁ∫øÁ®ã‰ºöÈªòËÆ§Ë¢´‰∏ªÁ∫øÁ®ãkillÊéâ . ËÄåÂú®Python‰∏≠ , ‰∏ªÁ∫øÁ®ãÁªìÊùüÂêé , ‰ºöÈªòËÆ§Á≠âÂæÖÂ≠êÁ∫øÁ®ãÁªìÊùüÂêé , ‰∏ªÁ∫øÁ®ãÊâçÈÄÄÂá∫</code> </p>
<blockquote>
<p><strong>Join</strong></p>
</blockquote>
<p>Âú®‰∏äÈù¢ÁöÑÁ∫øÁ®ãÁöÑÂàõÂª∫Êó∂ , Ëé∑ÂèñÁ∫øÁ®ãÂêçÂπ∂‰∏çÊòØÂú®ÊúÄÂêéÊâßË°åÁöÑ , ËÄåÊòØÈÅáÂà∞sleepÈòªÂ°ûËá™Âä®ÂàáÊç¢ÊâßË°åÁöÑ , ËÄåsleep(2)ÂàôÊòØÂú®ÊúÄÂêéÊâßË°åÁöÑ , Â¶ÇÊûúËøò‰∏çÊòéÁôΩÂú®Áúã‰∏ãÈù¢‰∏Ä‰∏™‰æãÂ≠ê</p>
<p>ÈÅáÂà∞ÈòªÂ°ûËá™Âä®ÂàáÊç¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># ÂÆö‰πâÁ∫øÁ®ãË¶ÅÊâßË°åÁöÑÂáΩÊï∞</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># ÊâìÂç∞ÂÜÖÂÆπ</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    <span class="comment"># Áù°‰∏§Áßí</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># Áù°ÂÆåÁªßÁª≠Ëµ∑Êù•Âπ≤Ê¥ª</span></span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    <span class="comment"># ÂàõÂª∫Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    <span class="comment"># ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">    lyon.start()</span><br><span class="line">    <span class="comment"># ÂêØÂä®Âè¶‰∏Ä‰∏™Á∫øÁ®ã</span></span><br><span class="line">    kenneth.start()</span><br><span class="line">    <span class="comment"># ÊàëÊòØ‰∏ªÁ∫øÁ®ã,ÊàëÂ∫îËØ•ÊúÄÂêéÊâßË°åÁöÑ</span></span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">ÁªìÊûúÂàÜÊûê:</span></span><br><span class="line"><span class="string">Á¨¨‰∏ÄË°åÊâìÂç∞‰∫Ü I am Lyon,ËøôÊ≤°ÈóÆÈ¢òÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÂêØÂä®‰∫Ü</span></span><br><span class="line"><span class="string">Á¨¨‰∫åË°åÊâìÂç∞‰∫Ü I am Kenneth,ËøôÂ∞±ÊúâÈóÆÈ¢ò‰∫Ü,ËøôÊòéÊòéÊòØÁ¨¨‰∫å‰∏™Á∫øÁ®ã‰∏≠ÁöÑ‰∫ãÊÉÖ,ÊàëÊì¶ÊàëÁöÑÁ¨¨‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊ≤°ÊâßË°åÂÆå</span></span><br><span class="line"><span class="string">Á¨¨‰∏âË°åÊâìÂç∞‰∫Ü I was the main thread, and I ended up executing,‰Ω†ÁâõÈÄºÊääÊàë‰∏ªÁ∫øÁ®ãÁöÑ‰∫ãÈÉΩÊâìÂç∞‰∫Ü</span></span><br><span class="line"><span class="string">Áù°‰∫Ü‰∏§Áßí,ÁúãÊù•ÊòØÈÅáÂà∞ÈòªÂ°ûËá™Âä®ÂàáÊç¢‰∫Ü</span></span><br><span class="line"><span class="string">ÊúÄÂêéÊâìÂç∞‰∫Ü‰∏§‰∏™Á∫øÁ®ã‰∏≠ÁöÑ When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Âú®ÂæàÂ§öÊÉÖÂÜµ‰∏ã , Êàë‰ª¨ÈúÄË¶ÅÁöÑÊòØËÆ©ÂêÑ‰∏™Á∫øÁ®ãÊâßË°åÂÆåÊØïÂêé , ÊâçÊé•ÁùÄÂæÄ‰∏ãÊâßË°å , ‰πüÂ∞±ÊòØ‰∏çË∑≥ËøáÈòªÂ°û , Â∞±ËÆ©ÂÆÉÁ≠â‰∏ãÂéª , Ëøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅÁî®join‰∫Ü</p>
<p>join : ÈòªÂ°ûË∞ÉÁî®Á®ãÂ∫è , Áü•ÈÅìjoin () ÊñπÊ≥ïÁöÑÁ∫øÁ®ãË∞ÉÁî®ÁªàÊ≠¢ , Êâç‰ºöÁªßÁª≠ÂæÄ‰∏ãÊâßË°å</p>
<p>‰∏äÈù¢Âä†‰∏äjoinÂêé</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    lyon.start()</span><br><span class="line">    lyon.join()</span><br><span class="line">    kenneth.start()</span><br><span class="line">    kenneth.join()</span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string"># sleep 2 seconds</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string"># sleep 2 seconds</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Á®ãÂ∫èÊåâÁÖßÊàë‰ª¨ÁöÑÊÑèÊÑøÊåâÈ°∫Â∫èÊâßË°å‰∫Ü</p>
<blockquote>
<p><strong>setDaemon</strong> </p>
</blockquote>
<p>Êó†ËÆ∫ËøõÁ®ãËøòÊòØÁ∫øÁ®ã , ÈÉΩÈÅµÂæ™ : ÂÆàÊä§ËøõÁ®ã (Á∫øÁ®ã) ‰ºöÁ≠âÂæÖ‰∏ªËøõÁ®ã (Á∫øÁ®ã) ËøêË°åÂÆåÊØïÂêéË¢´ÈîÄÊØÅ</p>
<p>ÂØπ‰∫é‰∏ªËøõÁ®ãÊù•ËØ¥ , ËøêË°åÂÆåÊØïÊåáÁöÑÊòØ‰∏ªËøõÁ®ã‰ª£Á†ÅËøêË°åÂÆåÊØï</p>
<p>ÂØπ‰∫é‰∏ªÁ∫øÁ®ãÊù•ËØ¥ , ËøêË°åÂÆåÊØïÊåáÁöÑÊòØ‰∏ªÁ∫øÁ®ãÊâÄÂú®ÁöÑËøõÁ®ãÂÜÖÊâÄÊúâÈùûÂÆàÊä§Á∫øÁ®ãÁªüÁªüËøêË°åÂÆåÊØï</p>
<p>setDaemon() ‰∏é join() Âü∫Êú¨‰∏äÊòØÁõ∏ÂØπÁöÑ , join‰ºöÁ≠âÂ≠êÁ∫øÁ®ãÊâßË°åÂÆåÊØï ; ËÄåsetDaemonÂàô‰∏ç‰ºöÁ≠â , Âè™Ë¶Å‰∏ªÁ∫øÁ®ãÊâßË°åÂÆå‰∫Ü ,  ÊàëÊâç‰∏çÁÆ°‰Ω†Â≠êÁ∫øÁ®ãÊâßÊ≤°ÊâßË°åÂÆåÊØï , ÁªüÁªüÁªôÊàëÂõûÊî∂ , ËøôÊ†∑ÊâçËÉΩ‰øùËØÅËøõÁ®ãËÉΩÊ≠£Â∏∏ÁªìÊùü</p>
<p>setDaemonËÆæÁΩÆÂÆàÊä§Á∫øÁ®ã</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    <span class="comment"># ËÆæÁΩÆÂÆàÊä§Á∫øÁ®ã,ÂøÖÈ°ªÂú®ÂêØÂä®ÂâçËÆæÁΩÆ</span></span><br><span class="line">    lyon.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">    lyon.start()</span><br><span class="line">    <span class="comment"># ËÆæÁΩÆÂÆàÊä§Á∫øÁ®ã</span></span><br><span class="line">    kenneth.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    kenneth.start()</span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">ÁªìÊûúËØ¥Êòé:</span></span><br><span class="line"><span class="string">‰∏ªÁ∫øÁ®ã‰∏ÄÊó¶ÊâßË°åÂÆåÊØï,ÈÇ£‰πàÂÆàÊä§Á∫øÁ®ãÂ∞±‰∏ÄÂπ∂ÈÄÄÂá∫,‰∏çÁÆ°Ë¢´ÂÆàÊä§Á∫øÁ®ãÊòØÂê¶ÊâßË°åÂÆåÊØï</span></span><br><span class="line"><span class="string">ÊâÄ‰ª•lyonÂíåkenneth‰∏§‰∏™Â≠êÁ∫øÁ®ãÂπ∂Ê≤°ÊúâÊâßË°åÂÆåÊØï,Â¶ÇÊûúÂú®‰∏ªÁ∫øÁ®ã‰∏≠Âú®Âä†‰∏äsleep(5),</span></span><br><span class="line"><span class="string">Âç≥Ë∂ÖËøáÂ≠êÁ∫øÁ®ãÈòªÂ°û,ÈÇ£‰πàËøô‰∏§‰∏™Â≠êÁ∫øÁ®ãÂ∞±ËÉΩÊâßË°åÂÆåÊØï‰∫Ü</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Â∞Ü‰∏ªÁ∫øÁ®ãËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ã</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(num)</span>:</span></span><br><span class="line">    print(<span class="string">"I like num %d"</span> % num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">        <span class="comment"># ÂàõÂª∫Á∫øÁ®ãÂÆû‰æã</span></span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        <span class="comment"># ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">        t.start()</span><br><span class="line">        <span class="comment"># ÈòªÂ°ûË∞ÉÁî®</span></span><br><span class="line">        t.join()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ÂàõÂª∫‰∏Ä‰∏™‰∏ªÁ∫øÁ®ã</span></span><br><span class="line">    m = threading.Thread(target=main, args=[])</span><br><span class="line">    <span class="comment"># ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ã</span></span><br><span class="line">    m.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># ÂêØÂä®Á∫øÁ®ã</span></span><br><span class="line">    m.start()</span><br><span class="line">    <span class="comment"># Á≠âÂæÖÂÖ∂Â≠êÁ∫øÁ®ãÊâßË°åÂÆåÊØïÂêé,ÂÜç8ÁßíÈÄÄÂá∫</span></span><br><span class="line">    m.join(timeout=<span class="number">8</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">I like num 1</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 2</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 3</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 4</span></span><br><span class="line"><span class="string">ÁªìÊûúËØ¥Êòé:</span></span><br><span class="line"><span class="string">Â≠êÁ∫øÁ®ãÂπ∂Ê≤°ÊúâÊâßË°åÂÆåÊØï,‰∏ªÁ∫øÁ®ãÈÄÄÂá∫,ÂÆàÊä§Á∫øÁ®ã‰∏ÄÂπ∂ÈÄÄÂá∫</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h2 id="Python-GIL-üçÄ"><a href="#Python-GIL-üçÄ" class="headerlink" title="Python GIL  üçÄ"></a>Python GIL  üçÄ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">In CPython, the global interpreter lock, or GIL, is a mutex that prevents multiple </span></span><br><span class="line"><span class="string">native threads from executing Python bytecodes at once. This lock is necessary mainly </span></span><br><span class="line"><span class="string">because CPython‚Äôs memory management is not thread-safe. (However, since the GIL </span></span><br><span class="line"><span class="string">exists, other features have grown to depend on the guarantees that it enforces.)</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Âü∫Êú¨ÊÑèÊÄùÊòØËØ¥ , Âú®CPythonËß£ÈáäÂô®‰∏≠ , Âêå‰∏Ä‰∏™ËøõÁ®ã‰∏ãÂºÄÂêØÁöÑÂ§öÁ∫øÁ®ã , Âêå‰∏ÄÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å , Êó†Ê≥ïÂà©Áî®Â§öÊ†∏‰ºòÂäø</p>
<p>GILÂπ∂‰∏çÊòØPythonÁöÑ‰∏ÄÁßçÁâπÊÄß , ÂÆÉÊòØÂú®ÂÆûÁé∞PythonËß£ÈáäÂô®(CPhthon)Êó∂ÂºïÂÖ•ÁöÑ‰∏Ä‰∏™Ê¶ÇÂøµ , Â∞±ÊØîÂ¶ÇÂêå‰∏ÄÊÆµ‰ª£Á†ÅÂèØ‰ª•ÈÄöËøáCPython , PyPy , PsycoÁ≠â‰∏çÂêåÁöÑPythonÊâßË°åÁéØÂ¢ÉÊù•ÊâßË°å , ÂÉèJPython‰∏≠Â∞±Ê≤°ÊúâGIL . Áî±‰∫éCPythonÊòØÂ§ßÈÉ®ÂàÜÁéØÂ¢É‰∏ãÈªòËÆ§ÁöÑPythonÊâßË°åÁéØÂ¢É , ÊâÄ‰ª•Âú®ÂæàÂ§ö‰∫∫ÁöÑÊ¶ÇÂøµÈáåCPythonÂ∞±ÊòØPython , ‰ΩÜÊòØË¶ÅËÆ∞‰Ωè , GILÂπ∂‰∏çÊòØPythonÁöÑÁâπÊÄß , PythonÂÆåÂÖ®ÂèØ‰ª•‰∏ç‰æùËµñGIL</p>
<blockquote>
<p><strong>GIL</strong> </p>
</blockquote>
<p>GILÊú¨Ë¥®Â∞±ÊòØ‰∏ÄÊää‰∫íÊñ•ÈîÅ , Âç≥‰ºöÂ∞ÜÂπ∂ÂèëËøêË°åÂèòÊàê‰∏≤Ë°å , ‰ª•Ê≠§Êù•ÊéßÂà∂Âêå‰∏ÄÊó∂Èó¥ÂÜÖÂÖ±‰∫´Êï∞ÊçÆÂè™ËÉΩË¢´‰∏Ä‰∏™‰ªªÂä°ËøõË°å‰øÆÊîπ , ‰ªéËÄå‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄß</p>
<p><code>‰øùÊä§‰∏çÂêåÁöÑÊï∞ÊçÆÊó∂ , Â∫îËØ•Âä†‰∏çÂêåÁöÑÈîÅ</code>  , GILÊòØËß£ÈáäÂô®Á∫ßÂà´ÁöÑÈîÅ , ÂèàÂè´ÂÅöÂÖ®Â±ÄËß£ÈáäÂô®ÈîÅ</p>
<p>CPythonÂä†ÂÖ•GIL‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØ‰∏∫‰∫ÜÈôç‰ΩéÁ®ãÂ∫èÁöÑÂºÄÂèëÂ§çÊùÇÂ∫¶ , ËÆ©‰Ω†‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÂÜÖÂ≠òÂõûÊî∂ÁöÑÈóÆÈ¢ò , ‰Ω†ÂèØ‰ª•ÁêÜËß£‰∏∫PythonËß£ÈáäÂô®ÈáåÊúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ∫øÁ®ã , ÊØèËøá‰∏ÄÊÆµÊó∂Èó¥ÂÆÉËµ∑wake upÂÅö‰∏ÄÊ¨°ÂÖ®Â±ÄËΩÆËØ¢ÁúãÁúãÂì™‰∫õÂÜÖÂ≠òÊï∞ÊçÆÊòØÂèØ‰ª•Ë¢´Ê∏ÖÁ©∫ÁöÑ , Ê≠§Êó∂‰Ω†Ëá™Â∑±ÁöÑÁ®ãÂ∫è ÈáåÁöÑÁ∫øÁ®ãÂíåPythonËß£ÈáäÂô®Ëá™Â∑±ÁöÑÁ∫øÁ®ãÊòØÂπ∂ÂèëËøêË°åÁöÑ , ÂÅáËÆæ‰Ω†ÁöÑÁ∫øÁ®ãÂà†Èô§‰∫Ü‰∏Ä‰∏™ÂèòÈáè , pyËß£ÈáäÂô®ÁöÑÂûÉÂúæÂõûÊî∂Á∫øÁ®ãÂú®Ê∏ÖÁ©∫Ëøô‰∏™ÂèòÈáèÁöÑËøáÁ®ã‰∏≠ÁöÑclearingÊó∂Âàª , ÂèØËÉΩ‰∏Ä‰∏™ÂÖ∂ÂÆÉÁ∫øÁ®ãÊ≠£Â•ΩÂèàÈáçÊñ∞ÁªôËøô‰∏™ËøòÊ≤°Êù•ÂèäÂæóÊ∏ÖÁ©∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ËµãÂÄº‰∫Ü , ÁªìÊûúÂ∞±ÊúâÂèØËÉΩÊñ∞ËµãÂÄºÁöÑÊï∞ÊçÆË¢´Âà†Èô§‰∫Ü , ‰∏∫‰∫ÜËß£ÂÜ≥Á±ª‰ººÁöÑÈóÆÈ¢ò , PythonËß£ÈáäÂô®ÁÆÄÂçïÁ≤óÊö¥ÁöÑÂä†‰∫ÜÈîÅ , Âç≥ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËøêË°åÊó∂ , ÂÖ∂ÂÆÉ‰∫∫ÈÉΩ‰∏çËÉΩÂä® , ËøôÊ†∑Â∞±Ëß£ÂÜ≥‰∫Ü‰∏äËø∞ÁöÑÈóÆÈ¢ò , ËøôÂèØ‰ª•ËØ¥ÊòØPythonÊó©ÊúüÁâàÊú¨ÁöÑÈÅóÁïôÈóÆÈ¢ò . ÊØïÁ´üPythonÂá∫Êù•ÁöÑÊó∂ÂÄô , Â§öÊ†∏Â§ÑÁêÜËøòÊ≤°Âá∫Êù•Âë¢ , ÊâÄ‰ª•Âπ∂Ê≤°ÊúâËÄÉËôëÂ§öÊ†∏ÈóÆÈ¢ò</p>
<p>‰ª•‰∏äÂ∞±ÂèØ‰ª•ËØ¥Êòé , PythonÂ§öÁ∫øÁ®ã‰∏çÈÄÇÂêàCPUÂØÜÈõÜÂûãÂ∫îÁî® , ‰ΩÜÈÄÇÁî®‰∫éIOÂØÜÈõÜÂûãÂ∫îÁî®</p>
<p>##Lock  üçÄ</p>
<p>Â§öÁ∫øÁ®ã‰∏éÂ§öËøõÁ®ãÊúÄÂ§ßÁöÑ‰∏çÂêåÂú®‰∫é , Â§öËøõÁ®ã‰∏≠ , Âêå‰∏Ä‰∏™ÂèòÈáè , ÂêÑËá™Êúâ‰∏Ä‰ªΩÊã∑Ë¥ùÂ≠òÂú®‰∫éÊØè‰∏™ËøõÁ®ã‰∏≠ , ‰∫í‰∏çÂΩ±Âìç , ‰ΩÜÊòØÂú®Â§öÁ∫øÁ®ã‰∏≠ , ÊâÄÊúâÂèòÈáèÂØπ‰∫éÊâÄÊúâÁ∫øÁ®ãÈÉΩÊòØÂÖ±‰∫´ÁöÑ , Âõ†Ê≠§ , Á∫øÁ®ã‰πãÈó¥ÂÖ±‰∫´Êï∞ÊçÆÊúÄÂ§ßÁöÑÂç±Èô©Âú®‰∫éÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂‰øÆÊîπ‰∏Ä‰∏™ÂèòÈáè , ÈÇ£Â∞±‰π±Â•ó‰∫Ü , ÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅGIL‰∏ÄÊ†∑ , Êù•ÈîÅ‰ΩèÊï∞ÊçÆ</p>
<p>‰∏äÈù¢ËØ¥‰∫Ü , ‰øùÊä§‰∏çÂêåÁöÑÊï∞ÊçÆ , Ë¶ÅÂä†‰∏çÂêåÁöÑÈîÅ , GILÊòØ‰∏∫‰∫Ü‰øùÊä§Ëß£ÈáäÂô®ÁöÑÊï∞ÊçÆ , ÊòéÊòæÊàë‰ª¨ËøòÈúÄË¶Å‰øùÊä§Áî®Êà∑Êï∞ÊçÆÁöÑÈîÅ</p>
<p>ÊâÄ‰ª•‰∏∫‰∫Ü‰øùËØÅÁî®Êà∑Êï∞ÊçÆÁöÑÂÆâÂÖ® , Êàë‰ª¨ÈúÄË¶ÅÂè¶‰∏Ä‰∏™ÈîÅ , ‰∫íÊñ•ÈîÅ(Mutex)</p>
<p>Êó†ÈîÅÁâàÊú¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Á∫øÁ®ãÁöÑË∞ÉÂ∫¶ÊòØÁî±Êìç‰ΩúÁ≥ªÁªüÂÜ≥ÂÆöÁöÑ,‰∏ÄÊó¶Á∫øÁ®ã‰∫§ÊõøÊâßË°å,Âπ∂‰∏îÊ¨°Êï∞Ë∂≥Â§üÂ§ö,ÈÇ£‰πàÂ∞±ÂèØËÉΩÂá∫ÈóÆÈ¢ò‰∫Ü</span></span><br><span class="line"><span class="comment"># Áõ¥Êé•Áî®ÂªñÂ§ßÂ§ßÁöÑ‰æãÂ≠ê,Âú∞ÂùÄ:www.liaoxuefeng.com</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="comment"># ÂÅáÂÆöËøôÊòØ‰Ω†ÁöÑÈì∂Ë°åÂ≠òÊ¨æ:</span></span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="comment"># ÂÖàÂ≠òÂêéÂèñÔºåÁªìÊûúÂ∫îËØ•‰∏∫0:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    balance = balance + n</span><br><span class="line">    balance = balance - n</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_thread</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        change_it(n)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    t1 = threading.Thread(target=run_thread, args=(<span class="number">5</span>,))</span><br><span class="line">    t2 = threading.Thread(target=run_thread, args=(<span class="number">8</span>,))</span><br><span class="line">    <span class="comment"># ËøôÈáåË∑üjoinÁöÑ‰ΩçÁΩÆÊúâÂÖ≥Á≥ª,Âõ†‰∏∫join‰πüÊòØÂèØ‰ª•ÂÆûÁé∞ÈîÅÁöÑÂäüËÉΩÁöÑ,‰∏ãÈù¢ËØ¥</span></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(balance,end=<span class="string">""</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string"># ËøôÈáåÊàëÂ∞±Âè™ÁªôÂá∫5Ê¨°ÁöÑÁªìÊûú,Âõ†‰∏∫5Ê¨°Â∞±Â∑≤ÁªèÂá∫Áé∞ÈîôËØØ‰∫Ü</span></span><br><span class="line"><span class="string"># Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊï∞ÊçÆ‰∏çÊ∑∑‰π±,ÁªìÊûúÂ∫îËØ•‰∏ÄÁõ¥‰∏∫0</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Âä†ÈîÅÁâàÊú¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="comment"># ÂÅáÂÆöËøôÊòØ‰Ω†ÁöÑÈì∂Ë°åÂ≠òÊ¨æ:</span></span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="comment"># ÂÖàÂ≠òÂêéÂèñÔºåÁªìÊûúÂ∫îËØ•‰∏∫0:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    balance = balance + n</span><br><span class="line">    balance = balance - n</span><br><span class="line"><span class="comment"># ÂàõÂª∫‰∏ÄÊääÈîÅ</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_thread</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        <span class="comment"># ÂÖàË¶ÅËé∑ÂèñÈîÅ:</span></span><br><span class="line">        lock.acquire()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ÊîæÂøÉÂú∞ÊîπÂêß:</span></span><br><span class="line">            change_it(n)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment"># ÊîπÂÆå‰∫Ü‰∏ÄÂÆöË¶ÅÈáäÊîæÈîÅ:</span></span><br><span class="line">            lock.release()</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    t1 = threading.Thread(target=run_thread, args=(<span class="number">5</span>,))</span><br><span class="line">    t2 = threading.Thread(target=run_thread, args=(<span class="number">8</span>,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(balance)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string"># ËøôÈáåÁöÑÁªìÊûú‰∏ÄÁõ¥ÈÉΩÊòØ0,SoÊàëÂ∞±Âè™ÂÜôÂá∫‰∏Ä‰∏™ÁªìÊûú‰∫Ü </span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p><strong>join vs lock</strong> </p>
<p>‰∏äÈù¢Á¨¨‰∏Ä‰∏™Êó†ÈîÅÁâàÊú¨ÁöÑ‰æãÂ≠ê‰∏≠ , ÂÖ∂ÂÆûjoin()Â∞±ÂèØ‰ª•ÂÆûÁé∞Êàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÂäüËÉΩ , Âè™ÈúÄË¶ÅÂêÑ‰∏™Á∫øÁ®ãÂêéÈù¢‰∏çÂä†Â§ö‰ΩôÁöÑ‰∏úË•øÁõ¥Êé•Êé•join()Â∞±Ë°å , Âõ†‰∏∫Êàë‰ª¨Áü•ÈÅìjoin()ÁöÑÂäüËÉΩÊòØËøõË°åÈòªÂ°û , ‰∏ÄÂä†join() , ËÇØÂÆöÂÖ∂‰ªñÂ∞±Ê≤°ÊúâÁ∫øÁ®ãËÉΩÂä®‰∫Ü , ‰∏äÈù¢‰æãÂ≠ê‰∏≠ÊïÖÊÑèÂ∞Ü<code>t1.join()</code> Âä†Âú®‰∫Ü<code>t2.start()</code>ÁöÑÂêéÈù¢ , Â∞±ÊòØ‰∏∫‰∫ÜËÉΩËÆ©t2‚ÄùÊúâÊú∫ÂèØË∂Å‚Äù , Êó¢ÁÑ∂<code>join()</code> Â∞±ÂèØ‰ª•ÂÆûÁé∞ , ÈÇ£Êàë‰ª¨ËøòË¶ÅÈîÅÂπ≤Âòõ?</p>
<p>Êàë‰ª¨Â∫îËØ•ÊÉ≥ÊÉ≥ , joinÂÆûÁé∞ÁöÑÂéüÁêÜ , join‰ºö‰ΩøÁ∫øÁ®ãËøõË°åÈòªÂ°û , ‰πüÂ∞±ÊòØËØ¥‰ºöËÆ©Áúü‰∏™Á∫øÁ®ãÂèòÊàêÂÆåÂÖ®‰∏≤Ë°åÁöÑ , Êó¢ÁÑ∂Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂú®ËøõË°åÊìç‰Ωú , ÈÇ£‰πàÂÆÉËÇØÂÆöÂ∞±‰∏ç‰ºö‰π± , ‰ΩÜÊòØ‰ΩøÁî®joinÂΩ±Âìç‰∫ÜÊâßË°åÊïàÁéá , ÊâÄ‰ª•Êàë‰ª¨ÊÉ≥ËÉΩ‰∏çËÉΩÂè™ËÆ©Á∫øÁ®ã‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜ‰∏≤Ë°å? Á≠îÊ°àÊòØËÉΩÁöÑ , Â∞±ÊòØÂà©Áî®‰∫íÊñ•ÈîÅ , ÊÉ≥ËÆ©Âì™Èáå‰∏≤Ë°åÂ∞±ËÆ©Âì™Èáå‰∏≤Ë°å</p>
<p>PS : <code>Python3.x</code>Â•ΩÂÉè‰ºöËá™Âä®Âä†ÈîÅ , ‰ΩÜÊòØ<code>Python2.x</code>ÊòØ‰∏ç‰ºöÁöÑ , ÂÜôÁöÑÊó∂ÂÄôËøòÊòØÈÉΩÂä†‰∏äÊää , ‰øùËØÅÂÆâÂÖ®ÊÄß</p>
<h2 id="RLock-üçÄ"><a href="#RLock-üçÄ" class="headerlink" title="RLock  üçÄ"></a>RLock  üçÄ</h2><p>RLockÂè´ÂÅöÈÄíÂΩíÈîÅ , Âú®ËØ¥‰πãÂâçÂÖàËØ¥‰∏Ä‰∏™Ê≠ªÈîÅÈóÆÈ¢ò</p>
<p>ËøõÁ®ã‰πüÊúâÊ≠ªÈîÅÂíåÈÄíÂΩíÈîÅ , ÊâÄË∞ìÊ≠ªÈîÅ : ÊòØÊåá‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑËøõÁ®ãÊàñÁ∫øÁ®ãÂú®ÊâßË°åËøáÁ®ã‰∏≠ , Âõ†‰∫âÂ§∫ËµÑÊ∫êËÄåÈÄ†ÊàêÁöÑ‰∏ÄÁßç‰∫íÁõ∏Á≠âÂæÖÁöÑÁé∞Ë±° , Ëã•Êó†Â§ñÂäõ‰ΩúÁî® , ‰ªñ‰ª¨ÈÉΩÂ∞ÜÊó†Ê≥ïÊé®Ëøõ‰∏ãÂéª . Ê≠§Êó∂Áß∞Á≥ªÁªüÂ§Ñ‰∫éÊ≠ªÈîÅÁä∂ÊÄÅÊàñÁ≥ªÁªü‰∫ßÁîü‰∫ÜÊ≠ªÈîÅ , Ëøô‰∫õÊ∞∏ËøúÂú®‰∫íÁõ∏Á≠âÂæÖÁöÑËøõÁ®ãÁß∞‰∏∫Ê≠ªÈîÅËøõÁ®ã , Â¶Ç‰∏ã</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># ÂàõÂª∫‰∏§‰∏™ÈîÅ</span></span><br><span class="line">mutexA = threading.Lock()</span><br><span class="line">mutexB = threading.Lock()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="comment"># ÈáçÊûÑrunÊñπÊ≥ï</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.func1()</span><br><span class="line">        self.func2()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># Ëé∑ÂèñÈîÅA</span></span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        print(<span class="string">"\033[31m%s get mutexA...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># Ëé∑ÂèñÈîÅB</span></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        print(<span class="string">"\033[33m%s get mutexB...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># ÈáäÊîæÈîÅB</span></span><br><span class="line">        mutexB.release()</span><br><span class="line">        <span class="comment"># ÈáäÊîæÈîÅA</span></span><br><span class="line">        mutexA.release()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">(self)</span>:</span></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        print(<span class="string">"\033[35m%s get mutexB...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># Áù°1Áßí</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        print(<span class="string">"\033[37m%s get mutexA...\033[0m"</span> % self.name)</span><br><span class="line">        mutexA.release()</span><br><span class="line">        mutexB.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = MyThread()</span><br><span class="line">        t.start()</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">Thread-1 get mutexA...</span></span><br><span class="line"><span class="string">Thread-1 get mutexB...</span></span><br><span class="line"><span class="string">Thread-1 get mutexB...</span></span><br><span class="line"><span class="string">Thread-2 get mutexA...</span></span><br><span class="line"><span class="string"># Âà∞ËøôÈáåÊï¥‰∏™Á®ãÂ∫èÂ∞±Ê∞∏ËøúÁ≠âÁùÄ‰∫Ü</span></span><br><span class="line"><span class="string">ÁªìÊûúËØ¥Êòé: </span></span><br><span class="line"><span class="string">È¶ñÂÖàÊâßË°å‰∫Üfunc1,Ê≤°ÊúâÈòªÂ°û,È°∫Âà©ÊâßË°åÂÆåÊØï</span></span><br><span class="line"><span class="string">ÁÑ∂ÂêéÊâßË°åfunc2,Ëé∑Âèñ‰∫ÜÈîÅBÂêéÂ∞±ÂºÄÂßãÁù°1‰∏ÄÁßí,‰πüÂ∞±ÊòØÈòªÂ°ûÂºÄÂßã</span></span><br><span class="line"><span class="string">‰∫éÊòØÁ≥ªÁªüËá™Âä®ÂàáÊç¢,ÂÜçÊ¨°ÊâßË°å‰∫Üfunc1,ËÄåBÁöÑÈîÅÂú®ÈòªÂ°ûÂâçÊ≤°ÈáäÊîæ</span></span><br><span class="line"><span class="string">ÊúÄÂêéfunc1‰∏≠ÁöÑmutexB.acquire()Â∞±‰∏ÄÁõ¥Á≠âÂâçÈù¢‰∏Ä‰∏™Á∫øÁ®ãÊääÈîÅÁªôÈáäÊîæ‰∫Ü</span></span><br><span class="line"><span class="string">Á≠âÂà∞Â§©ËçíÂú∞ËÄÅ,Êµ∑ÊûØÁü≥ÁÉÇ,‰πüÁ≠â‰∏çÂà∞‰∫Ü</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>‰∏∫‰∫ÜËß£ÂÜ≥ËøôÊ†∑ÁöÑÈóÆÈ¢ò , ‰∫éÊòØÂ∞±Êúâ‰∫ÜÈÄíÂΩíÈîÅ , Âú®Python‰∏≠‰∏∫‰∫ÜÊîØÊåÅÂú®Âêå‰∏ÄÁ∫øÁ®ã‰∏≠Â§öÊ¨°ËØ∑Ê±ÇÂêå‰∏ÄËµÑÊ∫ê , PythonÊèê‰æõ‰∫ÜÂèØÈáçÂÖ•ÈîÅRLock</p>
<p>Ëøô‰∏™RLockÂÜÖÈÉ®Áª¥Êä§ÁùÄ‰∏Ä‰∏™LockÂíå‰∏Ä‰∏™counterÂèòÈáè , counterËÆ∞ÂΩï‰∫ÜacquireÁöÑÊ¨°Êï∞ , ‰ªéËÄå‰ΩøÂæóËµÑÊ∫êÂèØ‰ª•Ë¢´Â§öÊ¨°require . Áõ¥Âà∞‰∏Ä‰∏™Á∫øÁ®ãÊâÄÊúâÁöÑacquireÈÉΩË¢´release , ÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÊâçËÉΩËé∑ÂæóËµÑÊ∫ê</p>
<p>RLockÁâàÊú¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ‰ªÖ‰ªÖÂè™ÈúÄÂ¶Ç‰∏ã‰øÆÊîπ</span></span><br><span class="line">mutexA = threading.Lock()</span><br><span class="line">mutexB = threading.Lock()</span><br><span class="line"><span class="comment"># ‰ª•‰∏ä‰∏§Ë°å‰øÆÊîπ‰∏∫</span></span><br><span class="line">mutexA = mutexB = threading.RLock()</span><br><span class="line"><span class="comment"># Ê≥®ÊÑèÂ¶ÇÊûú‰ªÖ‰ªÖ‰øÆÊîπÂêéÈÉ®ÂàÜ,Âç≥Â∞ÜLock() -&gt; RLock()ÊòØ‰∏çË°åÁöÑ,ÈÇ£Ê†∑Á≠â‰∫éÂàõÂª∫‰∫Ü‰∏§ÊääÈÄíÂΩíÈîÅ</span></span><br></pre></td></tr></table></figure>
<h2 id="queue-üçÄ"><a href="#queue-üçÄ" class="headerlink" title="queue  üçÄ"></a>queue  üçÄ</h2><p>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÈòüÂàóÂ§ÑÁêÜÁ∫øÁ®ãÁºñÁ®ã‰∏≠Â§ö‰∏™Á∫øÁ®ã‰πãÈó¥‰∫§Êç¢ÁöÑÂÆâÂÖ®ÈóÆÈ¢ò</p>
<p>Âú®queue‰∏≠Êúâ‰∏âÁßçÊ®°Âºè , Queue (ÂÖàËøõÂÖàÂá∫ , FIFO) , LifoQueue (ÂêéËøõÂÖàÂá∫ , LIFO) , ËøòÊúâ‰∏Ä‰∏™ÂèØ‰ª•ËÆæÁΩÆ‰ºòÂÖàÁ∫ßÁöÑÈòüÂàóPriorityQueue</p>
<p>Queue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.Queue()</span><br><span class="line">q.put(<span class="string">'First'</span>)</span><br><span class="line">q.put(<span class="string">'Second'</span>)</span><br><span class="line">q.put(<span class="string">'Third'</span>)</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">First</span></span><br><span class="line"><span class="string">Second</span></span><br><span class="line"><span class="string">Third</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>LifoQueue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.LifoQueue()</span><br><span class="line">q.put(<span class="string">'First'</span>)</span><br><span class="line">q.put(<span class="string">'Second'</span>)</span><br><span class="line">q.put(<span class="string">'Third'</span>)</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">Third</span></span><br><span class="line"><span class="string">Second</span></span><br><span class="line"><span class="string">First</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>PriorityQueue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.PriorityQueue()</span><br><span class="line"><span class="comment"># putËøõÂÖ•‰∏Ä‰∏™ÂÖÉÁªÑ,ÂÖÉÁªÑÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ‰ºòÂÖàÁ∫ß,Ë∂äÂ∞è‰ºòÂÖàÁ∫ßË∂äÈ´ò</span></span><br><span class="line">q.put((<span class="number">20</span>, <span class="string">'A'</span>))</span><br><span class="line">q.put((<span class="number">10</span>, <span class="string">'B'</span>))</span><br><span class="line">q.put((<span class="number">30</span>, <span class="string">'C'</span>))</span><br><span class="line"></span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">ÊâßË°åÁªìÊûú:</span></span><br><span class="line"><span class="string">(10, 'B')</span></span><br><span class="line"><span class="string">(20, 'A')</span></span><br><span class="line"><span class="string">(30, 'C')</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>Êõ¥Â§öËØ∑ÈòÖËØªPythonÊ†áÂáÜÂ∫ìÁõÆÂΩï‰∏ãÁöÑqueueÊ®°ÂùóÂÜÖÂÆπ</p>
<h2 id="Producer-Consumer-üçÄ"><a href="#Producer-Consumer-üçÄ" class="headerlink" title="Producer-Consumer  üçÄ"></a>Producer-Consumer  üçÄ</h2><p><strong>Áîü‰∫ßËÄÖ - Ê∂àË¥πËÄÖÈóÆÈ¢ò</strong>  </p>
<p>ÂèàÁß∞ÊúâÁïåÁºìÂÜ≤Âå∫ÈóÆÈ¢ò , Âú®ËøõÁ®ã‰∏≠ , ‰∏§‰∏™ËøõÁ®ãÂÖ±‰∫´‰∏Ä‰∏™ÂÖ¨ÂÖ±ÁöÑÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÁºìÂÜ≤Âå∫ , ÂÖ∂‰∏≠‰∏Ä‰∏™ÊòØÁîü‰∫ßËÄÖ , Â∞Ü‰ø°ÊÅØÊîæÂÖ•ÁºìÂÜ≤Âå∫ ; Âè¶‰∏Ä‰∏™ÊòØÊ∂àË¥πËÄÖ , ‰ªéÁºìÂÜ≤Âå∫ÂèñÂá∫‰ø°ÊÅØ . ÈóÆÈ¢òÂú®‰∫éÂΩìÁºìÂÜ≤Âå∫Êª°Êó∂ , ËÄåÊ≠§Êó∂Áîü‰∫ßËÄÖËøòÊÉ≥ÂêëÂÖ∂‰∏≠ÊîæÂÖ•‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈ°πÁöÑÊÉÖÂÜµ ; Áõ∏Âèç , ÂΩìÁºìÂÜ≤Âå∫‰∏∫Á©∫Êó∂ , Ê∂àË¥πËÄÖËßÜÂõæ‰ªéÁºìÂÜ≤Âå∫‰∏≠ÂèñÊï∞ÊçÆ , ËØ•Â¶Ç‰ΩïÂéªËß£ÂÜ≥? </p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò‰∫éÊòØÂºïÂÖ•‰∫ÜÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÊ®°Âºè , Âü∫Êú¨ÊÄùË∑Ø‰πüÊòØÂ¶ÇËøõÁ®ã‰∏≠Áù°Áú†ÂíåÂî§ÈÜí</p>
<p><strong>Áîü‰∫ßËÄÖÊ∂àË¥πÊ®°Âºè</strong> </p>
<p>ÈÄöËøá‰∏Ä‰∏™ÂÆπÂô®Êù•Ëß£ÂÜ≥Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑÂº∫ËÄ¶ÂêàÈóÆÈ¢ò . Áîü‰∫ßËÄÖ‰∏éÊ∂àË¥πËÄÖÂΩºÊ≠§‰πãÈó¥‰∏çÁõ¥Êé•ÈÄöËÆØ , ËÄåÈÄöËøáÈòªÂ°ûÈòüÂàóÊù•ËøõË°åÈÄöËÆØ , ÊâÄ‰ª•Áîü‰∫ßËÄÖÁîü‰∫ßÂÆåÊï∞ÊçÆ‰πãÂêé‰∏çÁî®Á≠âÂæÖÊ∂àË¥πËÄÖÂ§ÑÁêÜ , Áõ¥Êé•ÊâîÁªôÈòªÂ°ûÈòüÂàó , Ê∂àË¥πËÄÖ‰∏çÊâæÁîü‰∫ßËÄÖË¶ÅÊï∞ÊçÆ , ËÄåÊòØÁõ¥Êé•‰ªéÈòªÂ°ûÈòüÂàóÈáåÂèñ , ÈòªÂ°ûÈòüÂàóÂ∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ , Âπ≥Ë°°‰∫ÜÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑÂ§ÑÁêÜËÉΩÂäõ</p>
<p>Âú®Âπ∂ÂèëÁºñÁ®ã‰∏≠‰ΩøÁî®Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÊ®°ÂºèËÉΩËß£ÂÜ≥ÁªùÂ§ßÂ§öÊï∞Âπ∂ÂèëÈóÆÈ¢ò , Âú®Á∫øÁ®ã‰∏ñÁïåÈáå , Áîü‰∫ßËÄÖÂ∞±ÊòØÁîü‰∫ßÊï∞ÊçÆÁöÑÁ∫øÁ®ã , Ê∂àË¥πËÄÖÂ∞±ÊòØÊ∂àË¥πÊï∞ÊçÆÁöÑÁ∫øÁ®ã . ‰ª•‰∏ãÊúâ‰∏§‰∏™Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÈóÆÈ¢òÁöÑ‰æãÂ≠ê</p>
<p>Âü∫Á°ÄÁâàÊú¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="comment"># ËøõË°åÁîü‰∫ß,ÊîæÂÖ•ÈòüÂàó</span></span><br><span class="line">        q.put(<span class="string">"%d bottle of milk"</span> % i)</span><br><span class="line">    print(<span class="string">"Start waiting for all the milk to be taken..."</span>)</span><br><span class="line">    q.join()</span><br><span class="line">    print(<span class="string">"All the milk was taken out..."</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># ÈòüÂàó‰∏≠ÊúâÂ∞±Âèñ</span></span><br><span class="line">    <span class="keyword">while</span> q.qsize() &gt; <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"%s got %s"</span> % (name, q.get()))</span><br><span class="line">        q.task_done()</span><br><span class="line"><span class="comment"># ÂàõÂª∫‰∏Ä‰∏™ÈòüÂàóÂØπË±°</span></span><br><span class="line">q = queue.Queue()</span><br><span class="line">p = threading.Thread(target=producer,)</span><br><span class="line">p.start()</span><br><span class="line">c1 = consumer(<span class="string">"Lyon"</span>)</span><br></pre></td></tr></table></figure>
<p>Áîü‰∫ß‰∏éÊ∂àË¥πÂêåÊó∂ËøõË°å</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">q = queue.Queue()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Producer</span><span class="params">(name)</span>:</span></span><br><span class="line">  count = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> count &lt; <span class="number">20</span>:</span><br><span class="line">    time.sleep(random.randrange(<span class="number">3</span>))</span><br><span class="line">    <span class="comment"># Â∞ÜÊï∞ÊçÆÊîæÂÖ•ÈòüÂàó</span></span><br><span class="line">    q.put(count)</span><br><span class="line">    print(<span class="string">'Producer %s has produced %s bun...'</span> % (name, count))</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">  count = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> count &lt; <span class="number">20</span>:</span><br><span class="line">    time.sleep(random.randrange(<span class="number">4</span>))</span><br><span class="line">    <span class="comment"># ‰∏ç‰∏∫Á©∫Â∞±Âèñ,‰∏∫Á©∫Â∞±ÊèêÁ§∫</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> q.empty():</span><br><span class="line">        <span class="comment"># ‰ªéÈòüÂàó‰∏≠ÂèñÂá∫‰ø°ÊÅØ</span></span><br><span class="line">        data = q.get()</span><br><span class="line">        print(data)</span><br><span class="line">        print(<span class="string">'\033[32;1mConsumer %s has eat %s bun...\033[0m'</span> % (name, data))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"No bun anymore..."</span>)</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">p1 = threading.Thread(target=Producer, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">c1 = threading.Thread(target=Consumer, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">p1.start()</span><br><span class="line">c1.start()</span><br></pre></td></tr></table></figure>
<h2 id="Semaphore-üçÄ"><a href="#Semaphore-üçÄ" class="headerlink" title="Semaphore  üçÄ"></a>Semaphore  üçÄ</h2><p>‰ø°Âè∑Èáè(Semaphore) , ÂºïÂÖ•‰∏Ä‰∏™Êï¥ÂûãÂèòÈáèÊù•Á¥ØËÆ°Á∫øÁ®ãÁöÑÂî§ÈÜíÊ¨°Êï∞ , threadingÊ®°Âùó‰∏≠ , Êúâ‰∏Ä‰∏™SemaphoreÁ±ªÁÆ°ÁêÜ‰∏Ä‰∏™ÂÜÖÁΩÆÁöÑËÆ°Êï∞Âô® , ÊØèÂΩìË∞ÉÁî®acquire()Êó∂ÂÜÖÁΩÆËÆ°Êï∞Âô® -1 ;Ë∞ÉÁî®release()Êó∂ÂÜÖÁΩÆËÆ°Êï∞Âô® +1;ËÆ°Êï∞Âô®‰∏çËÉΩÂ∞è‰∫é0 ; ÂΩìËÆ°Êï∞Âô®Á≠â‰∫é0Êó∂ , acquire()Â∞ÜÈòªÂ°ûÁ∫øÁ®ãÁü•ÈÅìÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®release()</p>
<p>‰∏ÄÊ¨°ÊúÄÂ§öËøûÊé•5‰∏™Á∫øÁ®ã</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># ÂÜÖÁΩÆËÆ°Êï∞Âô® -1</span></span><br><span class="line">    sm.acquire()</span><br><span class="line">    print(<span class="string">'%s get semaphores'</span> % threading.current_thread().getName())</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># ÂÜÖÁΩÆËÆ°Êï∞Âô® +1</span></span><br><span class="line">    sm.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ‰∏ÄÊ¨°ÊúÄÂ§öÂè™ËÉΩÊúâ5‰∏™Á∫øÁ®ãËé∑Âèñ‰ø°Âè∑Èáè</span></span><br><span class="line">    sm = threading.Semaphore(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=func)</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>
<p>Âà©Áî®‰ø°Âè∑ÈáèÂèØ‰ª•Ëß£ÂÜ≥Áîü‰∫ßËÄÖ‰∏éÊ∂àË¥πËÄÖÈóÆÈ¢ò , „ÄäÁé∞‰ª£Êìç‰ΩúÁ≥ªÁªü‰∏≠„Äã‰∏Ä‰π¶‰∏≠ËøõË°å‰∫ÜÁÆÄÂçïÁöÑÂÆûÁé∞</p>
<h2 id="Event-üçÄ"><a href="#Event-üçÄ" class="headerlink" title="Event  üçÄ"></a>Event  üçÄ</h2><p>Âú®Â§öÁ∫øÁ®ã‰∏≠ , ÊØè‰∏™Á∫øÁ®ãÈÉΩÊòØ‰∫íÁõ∏Áã¨Á´ãÁöÑ , ‰∫í‰∏çÂΩ±Âìç , Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÈÄöËøáÊüê‰∏™Á∫øÁ®ãÁöÑÁä∂ÊÄÅÊù•ÊéßÂà∂Á®ãÂ∫èÁöÑÊâßË°åËøáÁ®ã , ÊòØÈùûÂ∏∏ÈöæÁöÑ . ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò , Êàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®threading‰∏≠ÁöÑEventÂØπË±°Êù•ÂÆûÁé∞Êàë‰ª¨ÁöÑÁõÆÁöÑ</p>
<p>EventÂØπË±°‰∏≠ÂåÖÂê´‰∏Ä‰∏™ÂèØÁî±Á∫øÁ®ãËÆæÁΩÆÁöÑ‰ø°Âè∑Ê†áÂøó , ÂÆÉÂÖÅËÆ∏Á∫øÁ®ãÁ≠âÂæÖÊüê‰∫õ‰∫ã‰ª∂ÁöÑÂèëÁîü . Âú®ÂàùÂßãÊÉÖÂÜµ‰∏ã , EventÂØπË±°‰∏≠ÁöÑ‰ø°Âè∑Ê†áÂøóË¢´ËÆæÁΩÆ‰∏∫ÂÅá ; Â¶ÇÊûúÊúâÁ∫øÁ®ãÁ≠âÂæÖ‰∏Ä‰∏™EventÂØπË±° , ËÄåËøô‰∏™EventÂØπË±°ÁöÑÊ†áÂøó‰∏∫ÂÅá , ÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞Ü‰ºöË¢´‰∏ÄÁõ¥ÈòªÂ°ûÁõ¥Ëá≥ËØ•Ê†áÂøó‰∏∫Áúü . ‰∏Ä‰∏™Á∫øÁ®ãÂ¶ÇÊûúÂ∞Ü‰∏Ä‰∏™EventÂØπË±°ÁöÑ‰ø°Âè∑Ê†áÂøóËÆæÁΩÆ‰∏∫Áúü , ÂÆÉÂ∞ÜÂî§ÈÜíÊâÄÊúâÁ≠âÂæÖËøô‰∏™EventÂØπË±°ÁöÑÁ∫øÁ®ã . Â¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÁ≠âÂæÖ‰∏Ä‰∏™Â∑≤ÁªèË¢´ËÆæÁΩÆ‰∏∫ÁúüÁöÑEventÂØπË±° , ÈÇ£‰πàÂÆÉÂ∞ÜÂøΩÁï•Ëøô‰∏™‰∫ã‰ª∂ , ÁªßÁª≠ÊâßË°å</p>
<table>
<thead>
<tr>
<th>ÊñπÊ≥ï</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>Event.isSet()</td>
<td>ËøîÂõûEventÁöÑÁä∂ÊÄÅ , isSet == is_set</td>
</tr>
<tr>
<td>Event.wait()</td>
<td>Â¶ÇÊûúEvent.isSet() == FalseÂ∞ÜÈòªÂ°ûÁ∫øÁ®ã</td>
</tr>
<tr>
<td>Event.set()</td>
<td>ËÆæÁΩÆEventÁöÑÁä∂ÊÄÅÂÄº‰∏∫True , ÊâÄÊúâÈòªÂ°ûÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊøÄÊ¥ªËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅ , Á≠âÂæÖÊìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶</td>
</tr>
<tr>
<td>Event.clear()</td>
<td>ÂõûÂ§çEventÁöÑÁä∂ÊÄÅÂÄº‰∏∫False</td>
</tr>
</tbody>
</table>
<p>Ëß£ÂÜ≥ÈáçÂ§çËøûÊé•ÈóÆÈ¢ò</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_mysql</span><span class="params">()</span>:</span></span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> event.is_set():</span><br><span class="line">        <span class="comment"># Â§ß‰∫é3Ê¨°‰∏ªÂä®Ëß¶ÂèëTimeoutError</span></span><br><span class="line">        <span class="keyword">if</span> count &gt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">raise</span> TimeoutError(<span class="string">'Connection timeout...'</span>)</span><br><span class="line">        print(<span class="string">'%s %sth attempt to connect'</span> % (threading.current_thread().getName(), count))</span><br><span class="line">        <span class="comment"># ÈòªÂ°û0.5Áßí</span></span><br><span class="line">        event.wait(<span class="number">0.5</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    print(<span class="string">'%s connect successfully'</span> % threading.current_thread().getName())</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_mysql</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'%s is checking mysql'</span> % threading.current_thread().getName())</span><br><span class="line">    time.sleep(random.randint(<span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">    <span class="comment"># ÊøÄÊ¥ªÁ∫øÁ®ã</span></span><br><span class="line">    event.set()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    event = threading.Event()</span><br><span class="line">    conn1 = threading.Thread(target=conn_mysql)</span><br><span class="line">    conn2 = threading.Thread(target=conn_mysql)</span><br><span class="line">    check = threading.Thread(target=check_mysql)</span><br><span class="line">    conn1.start()</span><br><span class="line">    conn2.start()</span><br><span class="line">    check.start()</span><br></pre></td></tr></table></figure>
<h2 id="Condition-üçÄ"><a href="#Condition-üçÄ" class="headerlink" title="Condition  üçÄ"></a>Condition  üçÄ</h2><p>‰ΩøÁ∫øÁ®ãÁ≠âÂæÖ , Âè™ÊúâÊª°Ë∂≥Êù°‰ª∂Êó∂ , ÊâçÈáäÊîæÁ∫øÁ®ã</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">condition_func</span><span class="params">()</span>:</span></span><br><span class="line">    ret = <span class="keyword">False</span></span><br><span class="line">    inp = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="comment"># Âè™ÊúâÂΩìinpÁ≠â‰∫é1Êó∂Êâç‰ºöÊâßË°å</span></span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">'1'</span>:</span><br><span class="line">        ret = <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(n)</span>:</span></span><br><span class="line">    con.acquire()</span><br><span class="line">    con.wait_for(condition_func)</span><br><span class="line">    print(<span class="string">"run the thread: %s"</span> %n)</span><br><span class="line">    con.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    con = threading.Condition()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>
<h2 id="Timer-üçÄ"><a href="#Timer-üçÄ" class="headerlink" title="Timer  üçÄ"></a>Timer  üçÄ</h2><p>threadingÊ®°Âùó‰∏≠ËøòÊúâ‰∏Ä‰∏™TimerÁ±ª , ÂèØ‰ª•ÊåáÂÆöÊó∂Èó¥ÂêéÊâßË°åÊüêÊìç‰Ωú</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"I am Lyon"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"Hello, future"</span>)</span><br><span class="line"><span class="comment"># 1ÁßíÂêéÊâßË°å</span></span><br><span class="line">t1 = threading.Timer(<span class="number">1</span>, hello1)</span><br><span class="line"><span class="comment"># ‰∏§ÁßíÂêéÊâßË°å</span></span><br><span class="line">t2 = threading.Timer(<span class="number">2</span>,hello2)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    
   
    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

  <!-- JSÂ∫ì sweetalert ÂèØ‰øÆÊîπË∑ØÂæÑ -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>Êú¨ÊñáÊ†áÈ¢ò:</span><a href="/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/">41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã</a></p>
  <p><span>ÊñáÁ´†‰ΩúËÄÖ:</span><a href="/" title="ËÆøÈóÆ Jesse ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢">Jesse</a></p>
  <p><span>ÂèëÂ∏ÉÊó∂Èó¥:</span>2020Âπ¥06Êúà26Êó• - 09:06</p>
  <p><span>ÊúÄÂêéÊõ¥Êñ∞:</span>2020Âπ¥06Êúà30Êó• - 20:06</p>
  <p><span>ÂéüÂßãÈìæÊé•:</span><a href="/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/" title="41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã">https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/</a>
    <span class="copy-path"  title="ÁÇπÂáªÂ§çÂà∂ÊñáÁ´†ÈìæÊé•"><i class="fa fa-clipboard" data-clipboard-text="https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/"  aria-label="Â§çÂà∂ÊàêÂäüÔºÅ"></i></span>
  </p>
  <p><span>ËÆ∏ÂèØÂçèËÆÆ:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">Á¶ÅÊ≠¢ÂïÜ‰∏öÁî®ÈÄî</a> ËΩ¨ËΩΩËØ∑‰øùÁïôÂéüÊñáÈìæÊé•Âèä‰ΩúËÄÖ„ÄÇ</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: 'Â§çÂà∂ÊàêÂäü',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>

      
    </div>

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>ÂùöÊåÅÂéüÂàõÊäÄÊúØÂàÜ‰∫´ÔºåÊÇ®ÁöÑÊîØÊåÅÂ∞ÜÈºìÂä±ÊàëÁªßÁª≠Âàõ‰ΩúÔºÅ</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>ÊâìËµè</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Jesse ÂæÆ‰ø°ÊîØ‰ªò"/>
        <p>ÂæÆ‰ø°ÊîØ‰ªò</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Jesse ÊîØ‰ªòÂÆù"/>
        <p>ÊîØ‰ªòÂÆù</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/26/python/06-Concurrent/01-Python‰πãË∑Ø - ËøõÁ®ã‰∏éÁ∫øÁ®ã/" rel="next" title="40.Python‰πãË∑Ø - ËøõÁ®ã‰∏éÁ∫øÁ®ã">
                <i class="fa fa-chevron-left"></i> 40.Python‰πãË∑Ø - ËøõÁ®ã‰∏éÁ∫øÁ®ã
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/06/26/python/06-Concurrent/04-Python‰πãË∑Ø - Â§öËøõÁ®ãÂÆû‰æãÂèäÂõûË∞ÉÂáΩÊï∞/" rel="prev" title="43.Python‰πãË∑Ø - Â§öËøõÁ®ãÂÆû‰æãÂèäÂõûË∞ÉÂáΩÊï∞">
                43.Python‰πãË∑Ø - Â§öËøõÁ®ãÂÆû‰æãÂèäÂõûË∞ÉÂáΩÊï∞ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div class="ds-thread" data-thread-key="2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/"
           data-title="41.Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã" data-url="https://jesse.top/2020/06/26/python/06-Concurrent/02-Python‰πãË∑Ø - Âπ∂ÂèëÁºñÁ®ã‰πãÂ§öÁ∫øÁ®ã/">
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            ÊñáÁ´†ÁõÆÂΩï
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Á´ôÁÇπÊ¶ÇËßà
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.png"
                alt="Jesse" />
            
              <p class="site-author-name" itemprop="name">Jesse</p>
              <p class="site-description motion-element" itemprop="description">Ê±ÇÁü•Ëã•È••,ËôöÂøÉËã•ÊÑö.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">208</span>
                  <span class="site-state-item-name">Êó•Âøó</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">ÂàÜÁ±ª</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">Ê†áÁ≠æ</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python‰πãË∑Ø-Â§öÁ∫øÁ®ãÁºñÁ®ã"><span class="nav-number">1.</span> <span class="nav-text">Python‰πãË∑Ø - Â§öÁ∫øÁ®ãÁºñÁ®ã</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ÂâçË®Ä-üçÄ"><span class="nav-number">1.1.</span> <span class="nav-text">ÂâçË®Ä  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Threading-üçÄ"><span class="nav-number">1.2.</span> <span class="nav-text">Threading  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Thread-üçÄ"><span class="nav-number">1.3.</span> <span class="nav-text">Thread  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Join-amp-setDaemon-üçÄ"><span class="nav-number">1.4.</span> <span class="nav-text">Join &amp; setDaemon  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python-GIL-üçÄ"><span class="nav-number">1.5.</span> <span class="nav-text">Python GIL  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RLock-üçÄ"><span class="nav-number">1.6.</span> <span class="nav-text">RLock  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#queue-üçÄ"><span class="nav-number">1.7.</span> <span class="nav-text">queue  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Producer-Consumer-üçÄ"><span class="nav-number">1.8.</span> <span class="nav-text">Producer-Consumer  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Semaphore-üçÄ"><span class="nav-number">1.9.</span> <span class="nav-text">Semaphore  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-üçÄ"><span class="nav-number">1.10.</span> <span class="nav-text">Event  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Condition-üçÄ"><span class="nav-number">1.11.</span> <span class="nav-text">Condition  üçÄ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Timer-üçÄ"><span class="nav-number">1.12.</span> <span class="nav-text">Timer  üçÄ</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; Tue Jun 12 2018 08:00:00 GMT+0800 (‰∏≠ÂõΩÊ†áÂáÜÊó∂Èó¥) &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jesse</span>

  
</div>

<!--

  <div class="powered-by">Áî± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> Âº∫ÂäõÈ©±Âä®</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">‰∏ªÈ¢ò &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

-->



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"comments"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '3CtYiIp3Dijlw0XHyLxqMUM0-gzGzoHsz',
        appKey: '6dleF8bCPBg8gTr0pBp1IgVe',
        placeholder: 'Ê¨¢ËøéÁïôË®Ä‰∫§ÊµÅ',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>

<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "59f7787a"
    });
  daovoice('update');
  </script>















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="Jesse's home" type="application/atom+xml" />






<meta name="description" content="Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹å‰è¨€  ğŸ€åœ¨ä¸Šä¸€ç¯‡ä¸­è¯´äº†ä¸€å¤§å †ç†è®º , é‚£ä¹ˆç°åœ¨å°±å¼€å§‹å®è·µäº†  å…ˆè¯´çº¿ç¨‹å†è¯´è¿›ç¨‹ , ä¸ºä»€ä¹ˆ ?  å› ä¸ºåœ¨Pythonä¸­æœ‰ä¸€ä¸ªPython GILå…¨å±€è§£é‡Šå™¨é” , è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿? æœ€åæ¥è¯´ æ€»ä¹‹çº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯ä¸æ“ä½œç³»ç»Ÿæœ‰å…³çš„çŸ¥è¯† , æ‰€ä»¥æ“ä½œç³»ç»ŸåŸºç¡€ , å¯¹äºè¿™ä¸¤èŠ‚å†…å®¹çš„ç†è§£ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ© Threading  ğŸ€Pythoné€šè¿‡ä¸¤ä¸ªæ ‡å‡†åº“_thread (b">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹">
<meta property="og:url" content="https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/index.html">
<meta property="og:site_name" content="Jesse&#39;s home">
<meta property="og:description" content="Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹å‰è¨€  ğŸ€åœ¨ä¸Šä¸€ç¯‡ä¸­è¯´äº†ä¸€å¤§å †ç†è®º , é‚£ä¹ˆç°åœ¨å°±å¼€å§‹å®è·µäº†  å…ˆè¯´çº¿ç¨‹å†è¯´è¿›ç¨‹ , ä¸ºä»€ä¹ˆ ?  å› ä¸ºåœ¨Pythonä¸­æœ‰ä¸€ä¸ªPython GILå…¨å±€è§£é‡Šå™¨é” , è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿? æœ€åæ¥è¯´ æ€»ä¹‹çº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯ä¸æ“ä½œç³»ç»Ÿæœ‰å…³çš„çŸ¥è¯† , æ‰€ä»¥æ“ä½œç³»ç»ŸåŸºç¡€ , å¯¹äºè¿™ä¸¤èŠ‚å†…å®¹çš„ç†è§£ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ© Threading  ğŸ€Pythoné€šè¿‡ä¸¤ä¸ªæ ‡å‡†åº“_thread (b">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-06-30T12:32:51.229Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹">
<meta name="twitter:description" content="Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹å‰è¨€  ğŸ€åœ¨ä¸Šä¸€ç¯‡ä¸­è¯´äº†ä¸€å¤§å †ç†è®º , é‚£ä¹ˆç°åœ¨å°±å¼€å§‹å®è·µäº†  å…ˆè¯´çº¿ç¨‹å†è¯´è¿›ç¨‹ , ä¸ºä»€ä¹ˆ ?  å› ä¸ºåœ¨Pythonä¸­æœ‰ä¸€ä¸ªPython GILå…¨å±€è§£é‡Šå™¨é” , è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿? æœ€åæ¥è¯´ æ€»ä¹‹çº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯ä¸æ“ä½œç³»ç»Ÿæœ‰å…³çš„çŸ¥è¯† , æ‰€ä»¥æ“ä½œç³»ç»ŸåŸºç¡€ , å¯¹äºè¿™ä¸¤èŠ‚å†…å®¹çš„ç†è§£ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ© Threading  ğŸ€Pythoné€šè¿‡ä¸¤ä¸ªæ ‡å‡†åº“_thread (b">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/"/>





  <title>41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹ | Jesse's home</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jesse's home</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jesse">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jesse's home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-06-26T09:20:58+08:00">
                2020-06-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/06-Concurrent/" itemprop="url" rel="index">
                    <span itemprop="name">06-Concurrent</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Pythonä¹‹è·¯-å¤šçº¿ç¨‹ç¼–ç¨‹"><a href="#Pythonä¹‹è·¯-å¤šçº¿ç¨‹ç¼–ç¨‹" class="headerlink" title="Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹"></a>Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹</h1><h2 id="å‰è¨€-ğŸ€"><a href="#å‰è¨€-ğŸ€" class="headerlink" title="å‰è¨€  ğŸ€"></a>å‰è¨€  ğŸ€</h2><p>åœ¨ä¸Šä¸€ç¯‡ä¸­è¯´äº†ä¸€å¤§å †ç†è®º , é‚£ä¹ˆç°åœ¨å°±å¼€å§‹å®è·µäº† </p>
<p>å…ˆè¯´çº¿ç¨‹å†è¯´è¿›ç¨‹ , ä¸ºä»€ä¹ˆ ?  å› ä¸ºåœ¨Pythonä¸­æœ‰ä¸€ä¸ª<code>Python GIL</code>å…¨å±€è§£é‡Šå™¨é” , è¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿? æœ€åæ¥è¯´</p>
<p>æ€»ä¹‹çº¿ç¨‹å’Œè¿›ç¨‹éƒ½æ˜¯ä¸æ“ä½œç³»ç»Ÿæœ‰å…³çš„çŸ¥è¯† , æ‰€ä»¥æ“ä½œç³»ç»ŸåŸºç¡€ , å¯¹äºè¿™ä¸¤èŠ‚å†…å®¹çš„ç†è§£ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©</p>
<h2 id="Threading-ğŸ€"><a href="#Threading-ğŸ€" class="headerlink" title="Threading  ğŸ€"></a>Threading  ğŸ€</h2><p>Pythoné€šè¿‡ä¸¤ä¸ªæ ‡å‡†åº“<code>_thread</code> (built-in) å’Œ<code>threading</code>æä¾›å¯¹çº¿ç¨‹çš„æ”¯æŒ , threadingå¯¹_threadè¿›è¡Œäº†å°è£…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_thread.py</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">This module provides primitive operations to write multi-threaded programs.</span></span><br><span class="line"><span class="string">The 'threading' module provides a more convenient interface.</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>So , æ˜æ˜¾æˆ‘ä»¬ä¸€èˆ¬ç›´æ¥ä½¿ç”¨threading</p>
<p>threadingæ¨¡å—ä¸­æä¾›äº†Thread , Lock , RLock , Semaphore , Event , Condition , Timerç­‰ç»„ä»¶</p>
<a id="more"></a>
<h2 id="Thread-ğŸ€"><a href="#Thread-ğŸ€" class="headerlink" title="Thread  ğŸ€"></a>Thread  ğŸ€</h2><p>å‚æ•°è¯´æ˜</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>group</td>
<td>æœªä½¿ç”¨ , å€¼å§‹ç»ˆ</td>
</tr>
<tr>
<td>target</td>
<td>è¡¨ç¤ºè°ƒç”¨å¯¹è±¡ , å³å­çº¿ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</td>
</tr>
<tr>
<td>name</td>
<td>å­çº¿ç¨‹çš„åç§°</td>
</tr>
<tr>
<td>args</td>
<td>ä¼ å…¥targetå‡½æ•°ä¸­çš„ä½ç½®å‚æ•° , æ˜¯ä¸€ä¸ªå…ƒç»„ , å‚æ•°åå¿…é¡»åŠ é€—å·</td>
</tr>
<tr>
<td>kwargs</td>
<td>è¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„å­—å…¸</td>
</tr>
</tbody>
</table>
<p>æ–¹æ³•è¯´æ˜</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Thread.run (self)</td>
<td>è¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³• , ç”±è¯¥æ–¹æ³•è°ƒç”¨targetå‚æ•°æ‰€æŒ‡å®šçš„å‡½æ•° , åœ¨å­ç±»ä¸­å¯ä»¥è¿›è¡Œé‡æ„ , ä¸çº¿ç¨‹ä¸­ä¸€æ ·</td>
</tr>
<tr>
<td>Thread.start (self)</td>
<td>å¯åŠ¨è¿›ç¨‹ , startæ–¹æ³•å°±æ˜¯å»å¸®ä½ è°ƒç”¨runæ–¹æ³•</td>
</tr>
<tr>
<td>Thread.terminate (self)</td>
<td>å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹ , ä¸ä¼šè¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œ , ä½¿ç”¨æ—¶éœ€å°å¿ƒå…¶å­è¿›ç¨‹ä¸é”çš„é—®é¢˜</td>
</tr>
<tr>
<td>Thread.join (self, timeout=None)</td>
<td>é˜»å¡è°ƒç”¨ , ä¸»çº¿ç¨‹è¿›è¡Œç­‰å¾… , timeoutä¸ºè¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td>Thread.is_alive (self)</td>
<td>è¿™ä¸ªæ–¹æ³•åœ¨run()æ–¹æ³•å¼€å§‹ä¹‹å‰è¿”å›True , åœ¨run()æ–¹æ³•ç»“æŸä¹‹å , è¿”å›æ‰€æœ‰æ´»åŠ¨çº¿ç¨‹çš„åˆ—è¡¨</td>
</tr>
<tr>
<td>Thread.isDaemon(self)</td>
<td>åˆ¤æ–­æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ , è¿”å›boolå€¼</td>
</tr>
<tr>
<td>Thread.setDaemon(self,daemonic)</td>
<td>å°†å­çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ , daemonic = daemon</td>
</tr>
<tr>
<td>Thread.getName(self,name)</td>
<td>è·å–çº¿ç¨‹åç§°</td>
</tr>
<tr>
<td>Thread.setName(self,name)</td>
<td>è®¾ç½®çº¿ç¨‹åç§°</td>
</tr>
</tbody>
</table>
<p>å®ä¾‹å±æ€§è¯´æ˜</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Thread.daemon</td>
<td>é»˜è®¤å€¼ä¸ºFalse , Trueåˆ™ä¸ºå®ˆæŠ¤çº¿ç¨‹</td>
</tr>
<tr>
<td>Thread.name</td>
<td>çº¿ç¨‹çš„åç§°</td>
</tr>
<tr>
<td>Thread.isAlive</td>
<td>å³ä¸ºis_aliveçš„è¿”å›å€¼</td>
</tr>
<tr>
<td>Thread.ident</td>
<td>çº¿ç¨‹æ ‡è¯†ç¬¦ , æ²¡å¯åŠ¨åˆ™ä¸ºNone</td>
</tr>
</tbody>
</table>
<p><strong>åˆ›å»ºçº¿ç¨‹</strong>  </p>
<p>Pythonä¸­ä½¿ç”¨çº¿ç¨‹æœ‰ä¸¤ç§æ–¹å¼ : å‡½æ•°æˆ–è€…ç”¨ç±»æ¥åŒ…è£…çº¿ç¨‹å¯¹è±¡</p>
<p>å‡½æ•°è°ƒç”¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># å®šä¹‰çº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    <span class="comment"># ä¸ºäº†ä¾¿äºè§‚å¯Ÿ,è®©å®ƒç¡ä¸Š2ç§’</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># é˜²æ­¢è¢«å¯¼å…¥æ‰§è¡Œä¸¤æ¬¡</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®ä¾‹,argså‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„,å¿…é¡»åŠ é€—å·</span></span><br><span class="line">    t1 = threading.Thread(target=func, args=(<span class="string">"Lyon"</span>,))</span><br><span class="line">    <span class="comment"># å†åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">    t2 = threading.Thread(target=func, args=(<span class="string">"Kenneth"</span>,))</span><br><span class="line">    <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">    t1.start()</span><br><span class="line">    <span class="comment"># å¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="comment"># æ‰“å°çº¿ç¨‹å</span></span><br><span class="line">    print(t1.getName())</span><br><span class="line">    <span class="comment"># æ‰“å°çº¿ç¨‹å</span></span><br><span class="line">    print(t2.getName())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">Thread-1</span></span><br><span class="line"><span class="string">Thread-2</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>ç±»ç»§æ‰¿è°ƒç”¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># ç»§æ‰¿threadingä¸­çš„Threadç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="comment"># çº¿ç¨‹ä¸­æ‰€éœ€è¦çš„å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="comment"># threading.Thread.__init__(self)</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.name = name</span><br><span class="line">	<span class="comment"># é‡æ„runæ–¹æ³•,æ³¨æ„è¿™ä¸ªæ˜¯è¡¨ç¤ºçº¿ç¨‹æ´»åŠ¨çš„æ–¹æ³•,å¿…é¡»æœ‰</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"I am %s"</span> % self.name)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># é˜²æ­¢è¢«å¯¼å…¥æ‰§è¡Œä¸¤æ¬¡</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">    t1 = MyThread(<span class="string">'Lyon'</span>)</span><br><span class="line">    <span class="comment"># åˆ›å»ºå¦ä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">    t2 = MyThread(<span class="string">'Kenneth'</span>)</span><br><span class="line">    <span class="comment"># å¯åŠ¨çº¿ç¨‹,è°ƒç”¨äº†ç±»ä¸­çš„runæ–¹æ³•</span></span><br><span class="line">    t1.start()</span><br><span class="line">    <span class="comment"># å¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="comment"># è·å–çº¿ç¨‹å</span></span><br><span class="line">    print(t1.getName())</span><br><span class="line">    <span class="comment"># è·å–çº¿ç¨‹å</span></span><br><span class="line">    print(t2.getName())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ: </span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">Lyon</span></span><br><span class="line"><span class="string">Kenneth</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Threadå®ä¾‹å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">  # isAlive(): è¿”å›çº¿ç¨‹æ˜¯å¦æ´»åŠ¨çš„ã€‚</span><br><span class="line">  # getName(): è¿”å›çº¿ç¨‹åã€‚</span><br><span class="line">  # setName(): è®¾ç½®çº¿ç¨‹åã€‚</span><br><span class="line">threadingæ¨¡å—æä¾›çš„ä¸€äº›æ–¹æ³•ï¼š</span><br><span class="line">  # threading.currentThread(): è¿”å›å½“å‰çš„çº¿ç¨‹å˜é‡ã€‚</span><br><span class="line">  # threading.enumerate(): è¿”å›ä¸€ä¸ªåŒ…å«æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹çš„listã€‚æ­£åœ¨è¿è¡ŒæŒ‡çº¿ç¨‹å¯åŠ¨åã€ç»“æŸå‰ï¼Œä¸åŒ…æ‹¬å¯åŠ¨å‰å’Œç»ˆæ­¢åçš„çº¿ç¨‹ã€‚</span><br><span class="line">  # threading.activeCount(): è¿”å›æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œä¸len(threading.enumerate())æœ‰ç›¸åŒçš„ç»“æœã€‚</span><br></pre></td></tr></table></figure>
<h2 id="Join-amp-setDaemon-ğŸ€"><a href="#Join-amp-setDaemon-ğŸ€" class="headerlink" title="Join &amp; setDaemon  ğŸ€"></a>Join &amp; setDaemon  ğŸ€</h2><p>åœ¨è¯´è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹å‰ , éœ€è¦çŸ¥é“ä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹çš„æ¦‚å¿µ</p>
<p>ä¸»çº¿ç¨‹ : å½“ä¸€ä¸ªç¨‹åºå¯åŠ¨æ—¶ , å°±æœ‰ä¸€ä¸ªè¿›ç¨‹è¢«æ“ä½œç³»ç»Ÿåˆ›å»º , ä¸æ­¤åŒæ—¶ä¸€ä¸ªçº¿ç¨‹ä¹Ÿç«‹åˆ»è¿è¡Œ , è¯¥çº¿ç¨‹é€šå¸¸å«åšç¨‹åºçš„ä¸»çº¿ç¨‹</p>
<p>å­çº¿ç¨‹ : å› ä¸ºç¨‹åºæ˜¯å¼€å§‹æ—¶å°±æ‰§è¡Œçš„ , å¦‚æœä½ éœ€è¦å†åˆ›å»ºçº¿ç¨‹ , é‚£ä¹ˆåˆ›å»ºçš„çº¿ç¨‹å°±æ˜¯è¿™ä¸ªä¸»çº¿ç¨‹çš„å­çº¿ç¨‹</p>
<p><code>ä¸»çº¿ç¨‹çš„é‡è¦æ€§ä½“ç°åœ¨ä¸¤æ–¹é¢ : 1. æ˜¯äº§ç”Ÿå…¶ä»–å­çº¿ç¨‹çš„çº¿ç¨‹ ; 2. é€šå¸¸å®ƒå¿…é¡»æœ€åå®Œæˆæ‰§è¡Œæ¯”å¦‚æ‰§è¡Œå„ç§å…³é—­ä½œ</code> </p>
<p><code>åœ¨Pythonä¸­çº¿ç¨‹çš„ä¸€äº›æœºåˆ¶ä¸C/C++ä¸åŒ , åœ¨C/C++ä¸­ , ä¸»çº¿ç¨‹ç»“æŸå , å…¶å­çº¿ç¨‹ä¼šé»˜è®¤è¢«ä¸»çº¿ç¨‹killæ‰ . è€Œåœ¨Pythonä¸­ , ä¸»çº¿ç¨‹ç»“æŸå , ä¼šé»˜è®¤ç­‰å¾…å­çº¿ç¨‹ç»“æŸå , ä¸»çº¿ç¨‹æ‰é€€å‡º</code> </p>
<blockquote>
<p><strong>Join</strong></p>
</blockquote>
<p>åœ¨ä¸Šé¢çš„çº¿ç¨‹çš„åˆ›å»ºæ—¶ , è·å–çº¿ç¨‹åå¹¶ä¸æ˜¯åœ¨æœ€åæ‰§è¡Œçš„ , è€Œæ˜¯é‡åˆ°sleepé˜»å¡è‡ªåŠ¨åˆ‡æ¢æ‰§è¡Œçš„ , è€Œsleep(2)åˆ™æ˜¯åœ¨æœ€åæ‰§è¡Œçš„ , å¦‚æœè¿˜ä¸æ˜ç™½åœ¨çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­</p>
<p>é‡åˆ°é˜»å¡è‡ªåŠ¨åˆ‡æ¢</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># å®šä¹‰çº¿ç¨‹è¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># æ‰“å°å†…å®¹</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    <span class="comment"># ç¡ä¸¤ç§’</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># ç¡å®Œç»§ç»­èµ·æ¥å¹²æ´»</span></span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    <span class="comment"># åˆ›å»ºå¦ä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">    lyon.start()</span><br><span class="line">    <span class="comment"># å¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">    kenneth.start()</span><br><span class="line">    <span class="comment"># æˆ‘æ˜¯ä¸»çº¿ç¨‹,æˆ‘åº”è¯¥æœ€åæ‰§è¡Œçš„</span></span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">ç»“æœåˆ†æ:</span></span><br><span class="line"><span class="string">ç¬¬ä¸€è¡Œæ‰“å°äº† I am Lyon,è¿™æ²¡é—®é¢˜ç¬¬ä¸€ä¸ªçº¿ç¨‹å¯åŠ¨äº†</span></span><br><span class="line"><span class="string">ç¬¬äºŒè¡Œæ‰“å°äº† I am Kenneth,è¿™å°±æœ‰é—®é¢˜äº†,è¿™æ˜æ˜æ˜¯ç¬¬äºŒä¸ªçº¿ç¨‹ä¸­çš„äº‹æƒ…,æˆ‘æ“¦æˆ‘çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹éƒ½æ²¡æ‰§è¡Œå®Œ</span></span><br><span class="line"><span class="string">ç¬¬ä¸‰è¡Œæ‰“å°äº† I was the main thread, and I ended up executing,ä½ ç‰›é€¼æŠŠæˆ‘ä¸»çº¿ç¨‹çš„äº‹éƒ½æ‰“å°äº†</span></span><br><span class="line"><span class="string">ç¡äº†ä¸¤ç§’,çœ‹æ¥æ˜¯é‡åˆ°é˜»å¡è‡ªåŠ¨åˆ‡æ¢äº†</span></span><br><span class="line"><span class="string">æœ€åæ‰“å°äº†ä¸¤ä¸ªçº¿ç¨‹ä¸­çš„ When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ , æˆ‘ä»¬éœ€è¦çš„æ˜¯è®©å„ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•å , æ‰æ¥ç€å¾€ä¸‹æ‰§è¡Œ , ä¹Ÿå°±æ˜¯ä¸è·³è¿‡é˜»å¡ , å°±è®©å®ƒç­‰ä¸‹å» , è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨joinäº†</p>
<p>join : é˜»å¡è°ƒç”¨ç¨‹åº , çŸ¥é“join () æ–¹æ³•çš„çº¿ç¨‹è°ƒç”¨ç»ˆæ­¢ , æ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œ</p>
<p>ä¸Šé¢åŠ ä¸Šjoinå</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    lyon.start()</span><br><span class="line">    lyon.join()</span><br><span class="line">    kenneth.start()</span><br><span class="line">    kenneth.join()</span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string"># sleep 2 seconds</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string"># sleep 2 seconds</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>ç¨‹åºæŒ‰ç…§æˆ‘ä»¬çš„æ„æ„¿æŒ‰é¡ºåºæ‰§è¡Œäº†</p>
<blockquote>
<p><strong>setDaemon</strong> </p>
</blockquote>
<p>æ— è®ºè¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ , éƒ½éµå¾ª : å®ˆæŠ¤è¿›ç¨‹ (çº¿ç¨‹) ä¼šç­‰å¾…ä¸»è¿›ç¨‹ (çº¿ç¨‹) è¿è¡Œå®Œæ¯•åè¢«é”€æ¯</p>
<p>å¯¹äºä¸»è¿›ç¨‹æ¥è¯´ , è¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯ä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•</p>
<p>å¯¹äºä¸»çº¿ç¨‹æ¥è¯´ , è¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯ä¸»çº¿ç¨‹æ‰€åœ¨çš„è¿›ç¨‹å†…æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»Ÿç»Ÿè¿è¡Œå®Œæ¯•</p>
<p>setDaemon() ä¸ join() åŸºæœ¬ä¸Šæ˜¯ç›¸å¯¹çš„ , joinä¼šç­‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯• ; è€ŒsetDaemonåˆ™ä¸ä¼šç­‰ , åªè¦ä¸»çº¿ç¨‹æ‰§è¡Œå®Œäº† ,  æˆ‘æ‰ä¸ç®¡ä½ å­çº¿ç¨‹æ‰§æ²¡æ‰§è¡Œå®Œæ¯• , ç»Ÿç»Ÿç»™æˆ‘å›æ”¶ , è¿™æ ·æ‰èƒ½ä¿è¯è¿›ç¨‹èƒ½æ­£å¸¸ç»“æŸ</p>
<p>setDaemonè®¾ç½®å®ˆæŠ¤çº¿ç¨‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"I am %s"</span> % name)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lyon = threading.Thread(target=run, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">    kenneth = threading.Thread(target=run, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">    <span class="comment"># è®¾ç½®å®ˆæŠ¤çº¿ç¨‹,å¿…é¡»åœ¨å¯åŠ¨å‰è®¾ç½®</span></span><br><span class="line">    lyon.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">    lyon.start()</span><br><span class="line">    <span class="comment"># è®¾ç½®å®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">    kenneth.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    kenneth.start()</span><br><span class="line">    print(<span class="string">"I was the main thread, and I ended up executing"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">I am Lyon</span></span><br><span class="line"><span class="string">I am Kenneth</span></span><br><span class="line"><span class="string">I was the main thread, and I ended up executing</span></span><br><span class="line"><span class="string">ç»“æœè¯´æ˜:</span></span><br><span class="line"><span class="string">ä¸»çº¿ç¨‹ä¸€æ—¦æ‰§è¡Œå®Œæ¯•,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹å°±ä¸€å¹¶é€€å‡º,ä¸ç®¡è¢«å®ˆæŠ¤çº¿ç¨‹æ˜¯å¦æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="string">æ‰€ä»¥lyonå’Œkennethä¸¤ä¸ªå­çº¿ç¨‹å¹¶æ²¡æœ‰æ‰§è¡Œå®Œæ¯•,å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­åœ¨åŠ ä¸Šsleep(5),</span></span><br><span class="line"><span class="string">å³è¶…è¿‡å­çº¿ç¨‹é˜»å¡,é‚£ä¹ˆè¿™ä¸¤ä¸ªå­çº¿ç¨‹å°±èƒ½æ‰§è¡Œå®Œæ¯•äº†</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>å°†ä¸»çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(num)</span>:</span></span><br><span class="line">    print(<span class="string">"I like num %d"</span> % num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"When I'm done, I'm going to keep talking..."</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">        <span class="comment"># åˆ›å»ºçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t.start()</span><br><span class="line">        <span class="comment"># é˜»å¡è°ƒç”¨</span></span><br><span class="line">        t.join()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªä¸»çº¿ç¨‹</span></span><br><span class="line">    m = threading.Thread(target=main, args=[])</span><br><span class="line">    <span class="comment"># è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">    m.setDaemon(<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">    m.start()</span><br><span class="line">    <span class="comment"># ç­‰å¾…å…¶å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å,å†8ç§’é€€å‡º</span></span><br><span class="line">    m.join(timeout=<span class="number">8</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">I like num 1</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 2</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 3</span></span><br><span class="line"><span class="string">When I'm done, I'm going to keep talking...</span></span><br><span class="line"><span class="string">I like num 4</span></span><br><span class="line"><span class="string">ç»“æœè¯´æ˜:</span></span><br><span class="line"><span class="string">å­çº¿ç¨‹å¹¶æ²¡æœ‰æ‰§è¡Œå®Œæ¯•,ä¸»çº¿ç¨‹é€€å‡º,å®ˆæŠ¤çº¿ç¨‹ä¸€å¹¶é€€å‡º</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h2 id="Python-GIL-ğŸ€"><a href="#Python-GIL-ğŸ€" class="headerlink" title="Python GIL  ğŸ€"></a>Python GIL  ğŸ€</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">In CPython, the global interpreter lock, or GIL, is a mutex that prevents multiple </span></span><br><span class="line"><span class="string">native threads from executing Python bytecodes at once. This lock is necessary mainly </span></span><br><span class="line"><span class="string">because CPythonâ€™s memory management is not thread-safe. (However, since the GIL </span></span><br><span class="line"><span class="string">exists, other features have grown to depend on the guarantees that it enforces.)</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>åŸºæœ¬æ„æ€æ˜¯è¯´ , åœ¨CPythonè§£é‡Šå™¨ä¸­ , åŒä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯çš„å¤šçº¿ç¨‹ , åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ , æ— æ³•åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿</p>
<p>GILå¹¶ä¸æ˜¯Pythonçš„ä¸€ç§ç‰¹æ€§ , å®ƒæ˜¯åœ¨å®ç°Pythonè§£é‡Šå™¨(CPhthon)æ—¶å¼•å…¥çš„ä¸€ä¸ªæ¦‚å¿µ , å°±æ¯”å¦‚åŒä¸€æ®µä»£ç å¯ä»¥é€šè¿‡CPython , PyPy , Psycoç­‰ä¸åŒçš„Pythonæ‰§è¡Œç¯å¢ƒæ¥æ‰§è¡Œ , åƒJPythonä¸­å°±æ²¡æœ‰GIL . ç”±äºCPythonæ˜¯å¤§éƒ¨åˆ†ç¯å¢ƒä¸‹é»˜è®¤çš„Pythonæ‰§è¡Œç¯å¢ƒ , æ‰€ä»¥åœ¨å¾ˆå¤šäººçš„æ¦‚å¿µé‡ŒCPythonå°±æ˜¯Python , ä½†æ˜¯è¦è®°ä½ , GILå¹¶ä¸æ˜¯Pythonçš„ç‰¹æ€§ , Pythonå®Œå…¨å¯ä»¥ä¸ä¾èµ–GIL</p>
<blockquote>
<p><strong>GIL</strong> </p>
</blockquote>
<p>GILæœ¬è´¨å°±æ˜¯ä¸€æŠŠäº’æ–¥é” , å³ä¼šå°†å¹¶å‘è¿è¡Œå˜æˆä¸²è¡Œ , ä»¥æ­¤æ¥æ§åˆ¶åŒä¸€æ—¶é—´å†…å…±äº«æ•°æ®åªèƒ½è¢«ä¸€ä¸ªä»»åŠ¡è¿›è¡Œä¿®æ”¹ , ä»è€Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§</p>
<p><code>ä¿æŠ¤ä¸åŒçš„æ•°æ®æ—¶ , åº”è¯¥åŠ ä¸åŒçš„é”</code>  , GILæ˜¯è§£é‡Šå™¨çº§åˆ«çš„é” , åˆå«åšå…¨å±€è§£é‡Šå™¨é”</p>
<p>CPythonåŠ å…¥GILä¸»è¦çš„åŸå› æ˜¯ä¸ºäº†é™ä½ç¨‹åºçš„å¼€å‘å¤æ‚åº¦ , è®©ä½ ä¸éœ€è¦å…³å¿ƒå†…å­˜å›æ”¶çš„é—®é¢˜ , ä½ å¯ä»¥ç†è§£ä¸ºPythonè§£é‡Šå™¨é‡Œæœ‰ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ , æ¯è¿‡ä¸€æ®µæ—¶é—´å®ƒèµ·wake upåšä¸€æ¬¡å…¨å±€è½®è¯¢çœ‹çœ‹å“ªäº›å†…å­˜æ•°æ®æ˜¯å¯ä»¥è¢«æ¸…ç©ºçš„ , æ­¤æ—¶ä½ è‡ªå·±çš„ç¨‹åº é‡Œçš„çº¿ç¨‹å’ŒPythonè§£é‡Šå™¨è‡ªå·±çš„çº¿ç¨‹æ˜¯å¹¶å‘è¿è¡Œçš„ , å‡è®¾ä½ çš„çº¿ç¨‹åˆ é™¤äº†ä¸€ä¸ªå˜é‡ , pyè§£é‡Šå™¨çš„åƒåœ¾å›æ”¶çº¿ç¨‹åœ¨æ¸…ç©ºè¿™ä¸ªå˜é‡çš„è¿‡ç¨‹ä¸­çš„clearingæ—¶åˆ» , å¯èƒ½ä¸€ä¸ªå…¶å®ƒçº¿ç¨‹æ­£å¥½åˆé‡æ–°ç»™è¿™ä¸ªè¿˜æ²¡æ¥åŠå¾—æ¸…ç©ºçš„å†…å­˜ç©ºé—´èµ‹å€¼äº† , ç»“æœå°±æœ‰å¯èƒ½æ–°èµ‹å€¼çš„æ•°æ®è¢«åˆ é™¤äº† , ä¸ºäº†è§£å†³ç±»ä¼¼çš„é—®é¢˜ , Pythonè§£é‡Šå™¨ç®€å•ç²—æš´çš„åŠ äº†é” , å³å½“ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶ , å…¶å®ƒäººéƒ½ä¸èƒ½åŠ¨ , è¿™æ ·å°±è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ , è¿™å¯ä»¥è¯´æ˜¯Pythonæ—©æœŸç‰ˆæœ¬çš„é—ç•™é—®é¢˜ . æ¯•ç«ŸPythonå‡ºæ¥çš„æ—¶å€™ , å¤šæ ¸å¤„ç†è¿˜æ²¡å‡ºæ¥å‘¢ , æ‰€ä»¥å¹¶æ²¡æœ‰è€ƒè™‘å¤šæ ¸é—®é¢˜</p>
<p>ä»¥ä¸Šå°±å¯ä»¥è¯´æ˜ , Pythonå¤šçº¿ç¨‹ä¸é€‚åˆCPUå¯†é›†å‹åº”ç”¨ , ä½†é€‚ç”¨äºIOå¯†é›†å‹åº”ç”¨</p>
<p>##Lock  ğŸ€</p>
<p>å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äº , å¤šè¿›ç¨‹ä¸­ , åŒä¸€ä¸ªå˜é‡ , å„è‡ªæœ‰ä¸€ä»½æ‹·è´å­˜åœ¨äºæ¯ä¸ªè¿›ç¨‹ä¸­ , äº’ä¸å½±å“ , ä½†æ˜¯åœ¨å¤šçº¿ç¨‹ä¸­ , æ‰€æœ‰å˜é‡å¯¹äºæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å…±äº«çš„ , å› æ­¤ , çº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®æœ€å¤§çš„å±é™©åœ¨äºå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå˜é‡ , é‚£å°±ä¹±å¥—äº† , æ‰€ä»¥æˆ‘ä»¬éœ€è¦GILä¸€æ · , æ¥é”ä½æ•°æ®</p>
<p>ä¸Šé¢è¯´äº† , ä¿æŠ¤ä¸åŒçš„æ•°æ® , è¦åŠ ä¸åŒçš„é” , GILæ˜¯ä¸ºäº†ä¿æŠ¤è§£é‡Šå™¨çš„æ•°æ® , æ˜æ˜¾æˆ‘ä»¬è¿˜éœ€è¦ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„é”</p>
<p>æ‰€ä»¥ä¸ºäº†ä¿è¯ç”¨æˆ·æ•°æ®çš„å®‰å…¨ , æˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªé” , äº’æ–¥é”(Mutex)</p>
<p>æ— é”ç‰ˆæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çº¿ç¨‹çš„è°ƒåº¦æ˜¯ç”±æ“ä½œç³»ç»Ÿå†³å®šçš„,ä¸€æ—¦çº¿ç¨‹äº¤æ›¿æ‰§è¡Œ,å¹¶ä¸”æ¬¡æ•°è¶³å¤Ÿå¤š,é‚£ä¹ˆå°±å¯èƒ½å‡ºé—®é¢˜äº†</span></span><br><span class="line"><span class="comment"># ç›´æ¥ç”¨å»–å¤§å¤§çš„ä¾‹å­,åœ°å€:www.liaoxuefeng.com</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="comment"># å‡å®šè¿™æ˜¯ä½ çš„é“¶è¡Œå­˜æ¬¾:</span></span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="comment"># å…ˆå­˜åå–ï¼Œç»“æœåº”è¯¥ä¸º0:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    balance = balance + n</span><br><span class="line">    balance = balance - n</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_thread</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        change_it(n)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    t1 = threading.Thread(target=run_thread, args=(<span class="number">5</span>,))</span><br><span class="line">    t2 = threading.Thread(target=run_thread, args=(<span class="number">8</span>,))</span><br><span class="line">    <span class="comment"># è¿™é‡Œè·Ÿjoinçš„ä½ç½®æœ‰å…³ç³»,å› ä¸ºjoinä¹Ÿæ˜¯å¯ä»¥å®ç°é”çš„åŠŸèƒ½çš„,ä¸‹é¢è¯´</span></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(balance,end=<span class="string">""</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string"># è¿™é‡Œæˆ‘å°±åªç»™å‡º5æ¬¡çš„ç»“æœ,å› ä¸º5æ¬¡å°±å·²ç»å‡ºç°é”™è¯¯äº†</span></span><br><span class="line"><span class="string"># æ­£å¸¸æƒ…å†µä¸‹æ•°æ®ä¸æ··ä¹±,ç»“æœåº”è¯¥ä¸€ç›´ä¸º0</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>åŠ é”ç‰ˆæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="comment"># å‡å®šè¿™æ˜¯ä½ çš„é“¶è¡Œå­˜æ¬¾:</span></span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="comment"># å…ˆå­˜åå–ï¼Œç»“æœåº”è¯¥ä¸º0:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    balance = balance + n</span><br><span class="line">    balance = balance - n</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€æŠŠé”</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_thread</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        <span class="comment"># å…ˆè¦è·å–é”:</span></span><br><span class="line">        lock.acquire()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ”¾å¿ƒåœ°æ”¹å§:</span></span><br><span class="line">            change_it(n)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment"># æ”¹å®Œäº†ä¸€å®šè¦é‡Šæ”¾é”:</span></span><br><span class="line">            lock.release()</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    t1 = threading.Thread(target=run_thread, args=(<span class="number">5</span>,))</span><br><span class="line">    t2 = threading.Thread(target=run_thread, args=(<span class="number">8</span>,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(balance)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string"># è¿™é‡Œçš„ç»“æœä¸€ç›´éƒ½æ˜¯0,Soæˆ‘å°±åªå†™å‡ºä¸€ä¸ªç»“æœäº† </span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p><strong>join vs lock</strong> </p>
<p>ä¸Šé¢ç¬¬ä¸€ä¸ªæ— é”ç‰ˆæœ¬çš„ä¾‹å­ä¸­ , å…¶å®join()å°±å¯ä»¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ , åªéœ€è¦å„ä¸ªçº¿ç¨‹åé¢ä¸åŠ å¤šä½™çš„ä¸œè¥¿ç›´æ¥æ¥join()å°±è¡Œ , å› ä¸ºæˆ‘ä»¬çŸ¥é“join()çš„åŠŸèƒ½æ˜¯è¿›è¡Œé˜»å¡ , ä¸€åŠ join() , è‚¯å®šå…¶ä»–å°±æ²¡æœ‰çº¿ç¨‹èƒ½åŠ¨äº† , ä¸Šé¢ä¾‹å­ä¸­æ•…æ„å°†<code>t1.join()</code> åŠ åœ¨äº†<code>t2.start()</code>çš„åé¢ , å°±æ˜¯ä¸ºäº†èƒ½è®©t2â€æœ‰æœºå¯è¶â€ , æ—¢ç„¶<code>join()</code> å°±å¯ä»¥å®ç° , é‚£æˆ‘ä»¬è¿˜è¦é”å¹²å˜›?</p>
<p>æˆ‘ä»¬åº”è¯¥æƒ³æƒ³ , joinå®ç°çš„åŸç† , joinä¼šä½¿çº¿ç¨‹è¿›è¡Œé˜»å¡ , ä¹Ÿå°±æ˜¯è¯´ä¼šè®©çœŸä¸ªçº¿ç¨‹å˜æˆå®Œå…¨ä¸²è¡Œçš„ , æ—¢ç„¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿›è¡Œæ“ä½œ , é‚£ä¹ˆå®ƒè‚¯å®šå°±ä¸ä¼šä¹± , ä½†æ˜¯ä½¿ç”¨joinå½±å“äº†æ‰§è¡Œæ•ˆç‡ , æ‰€ä»¥æˆ‘ä»¬æƒ³èƒ½ä¸èƒ½åªè®©çº¿ç¨‹ä¸­çš„ä¸€éƒ¨åˆ†ä¸²è¡Œ? ç­”æ¡ˆæ˜¯èƒ½çš„ , å°±æ˜¯åˆ©ç”¨äº’æ–¥é” , æƒ³è®©å“ªé‡Œä¸²è¡Œå°±è®©å“ªé‡Œä¸²è¡Œ</p>
<p>PS : <code>Python3.x</code>å¥½åƒä¼šè‡ªåŠ¨åŠ é” , ä½†æ˜¯<code>Python2.x</code>æ˜¯ä¸ä¼šçš„ , å†™çš„æ—¶å€™è¿˜æ˜¯éƒ½åŠ ä¸ŠæŠŠ , ä¿è¯å®‰å…¨æ€§</p>
<h2 id="RLock-ğŸ€"><a href="#RLock-ğŸ€" class="headerlink" title="RLock  ğŸ€"></a>RLock  ğŸ€</h2><p>RLockå«åšé€’å½’é” , åœ¨è¯´ä¹‹å‰å…ˆè¯´ä¸€ä¸ªæ­»é”é—®é¢˜</p>
<p>è¿›ç¨‹ä¹Ÿæœ‰æ­»é”å’Œé€’å½’é” , æ‰€è°“æ­»é” : æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ , å› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ , è‹¥æ— å¤–åŠ›ä½œç”¨ , ä»–ä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å» . æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é” , è¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ , å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸¤ä¸ªé”</span></span><br><span class="line">mutexA = threading.Lock()</span><br><span class="line">mutexB = threading.Lock()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="comment"># é‡æ„runæ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.func1()</span><br><span class="line">        self.func2()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># è·å–é”A</span></span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        print(<span class="string">"\033[31m%s get mutexA...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># è·å–é”B</span></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        print(<span class="string">"\033[33m%s get mutexB...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># é‡Šæ”¾é”B</span></span><br><span class="line">        mutexB.release()</span><br><span class="line">        <span class="comment"># é‡Šæ”¾é”A</span></span><br><span class="line">        mutexA.release()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">(self)</span>:</span></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        print(<span class="string">"\033[35m%s get mutexB...\033[0m"</span> % self.name)</span><br><span class="line">        <span class="comment"># ç¡1ç§’</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        print(<span class="string">"\033[37m%s get mutexA...\033[0m"</span> % self.name)</span><br><span class="line">        mutexA.release()</span><br><span class="line">        mutexB.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = MyThread()</span><br><span class="line">        t.start()</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">Thread-1 get mutexA...</span></span><br><span class="line"><span class="string">Thread-1 get mutexB...</span></span><br><span class="line"><span class="string">Thread-1 get mutexB...</span></span><br><span class="line"><span class="string">Thread-2 get mutexA...</span></span><br><span class="line"><span class="string"># åˆ°è¿™é‡Œæ•´ä¸ªç¨‹åºå°±æ°¸è¿œç­‰ç€äº†</span></span><br><span class="line"><span class="string">ç»“æœè¯´æ˜: </span></span><br><span class="line"><span class="string">é¦–å…ˆæ‰§è¡Œäº†func1,æ²¡æœ‰é˜»å¡,é¡ºåˆ©æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="string">ç„¶åæ‰§è¡Œfunc2,è·å–äº†é”Båå°±å¼€å§‹ç¡1ä¸€ç§’,ä¹Ÿå°±æ˜¯é˜»å¡å¼€å§‹</span></span><br><span class="line"><span class="string">äºæ˜¯ç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢,å†æ¬¡æ‰§è¡Œäº†func1,è€ŒBçš„é”åœ¨é˜»å¡å‰æ²¡é‡Šæ”¾</span></span><br><span class="line"><span class="string">æœ€åfunc1ä¸­çš„mutexB.acquire()å°±ä¸€ç›´ç­‰å‰é¢ä¸€ä¸ªçº¿ç¨‹æŠŠé”ç»™é‡Šæ”¾äº†</span></span><br><span class="line"><span class="string">ç­‰åˆ°å¤©è’åœ°è€,æµ·æ¯çŸ³çƒ‚,ä¹Ÿç­‰ä¸åˆ°äº†</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ , äºæ˜¯å°±æœ‰äº†é€’å½’é” , åœ¨Pythonä¸­ä¸ºäº†æ”¯æŒåœ¨åŒä¸€çº¿ç¨‹ä¸­å¤šæ¬¡è¯·æ±‚åŒä¸€èµ„æº , Pythonæä¾›äº†å¯é‡å…¥é”RLock</p>
<p>è¿™ä¸ªRLockå†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªLockå’Œä¸€ä¸ªcounterå˜é‡ , counterè®°å½•äº†acquireçš„æ¬¡æ•° , ä»è€Œä½¿å¾—èµ„æºå¯ä»¥è¢«å¤šæ¬¡require . ç›´åˆ°ä¸€ä¸ªçº¿ç¨‹æ‰€æœ‰çš„acquireéƒ½è¢«release , å…¶ä»–çš„çº¿ç¨‹æ‰èƒ½è·å¾—èµ„æº</p>
<p>RLockç‰ˆæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»…ä»…åªéœ€å¦‚ä¸‹ä¿®æ”¹</span></span><br><span class="line">mutexA = threading.Lock()</span><br><span class="line">mutexB = threading.Lock()</span><br><span class="line"><span class="comment"># ä»¥ä¸Šä¸¤è¡Œä¿®æ”¹ä¸º</span></span><br><span class="line">mutexA = mutexB = threading.RLock()</span><br><span class="line"><span class="comment"># æ³¨æ„å¦‚æœä»…ä»…ä¿®æ”¹åéƒ¨åˆ†,å³å°†Lock() -&gt; RLock()æ˜¯ä¸è¡Œçš„,é‚£æ ·ç­‰äºåˆ›å»ºäº†ä¸¤æŠŠé€’å½’é”</span></span><br></pre></td></tr></table></figure>
<h2 id="queue-ğŸ€"><a href="#queue-ğŸ€" class="headerlink" title="queue  ğŸ€"></a>queue  ğŸ€</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é˜Ÿåˆ—å¤„ç†çº¿ç¨‹ç¼–ç¨‹ä¸­å¤šä¸ªçº¿ç¨‹ä¹‹é—´äº¤æ¢çš„å®‰å…¨é—®é¢˜</p>
<p>åœ¨queueä¸­æœ‰ä¸‰ç§æ¨¡å¼ , Queue (å…ˆè¿›å…ˆå‡º , FIFO) , LifoQueue (åè¿›å…ˆå‡º , LIFO) , è¿˜æœ‰ä¸€ä¸ªå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§çš„é˜Ÿåˆ—PriorityQueue</p>
<p>Queue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.Queue()</span><br><span class="line">q.put(<span class="string">'First'</span>)</span><br><span class="line">q.put(<span class="string">'Second'</span>)</span><br><span class="line">q.put(<span class="string">'Third'</span>)</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">First</span></span><br><span class="line"><span class="string">Second</span></span><br><span class="line"><span class="string">Third</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>LifoQueue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.LifoQueue()</span><br><span class="line">q.put(<span class="string">'First'</span>)</span><br><span class="line">q.put(<span class="string">'Second'</span>)</span><br><span class="line">q.put(<span class="string">'Third'</span>)</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">Third</span></span><br><span class="line"><span class="string">Second</span></span><br><span class="line"><span class="string">First</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>PriorityQueue</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">q = Queue.PriorityQueue()</span><br><span class="line"><span class="comment"># putè¿›å…¥ä¸€ä¸ªå…ƒç»„,å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¼˜å…ˆçº§,è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">q.put((<span class="number">20</span>, <span class="string">'A'</span>))</span><br><span class="line">q.put((<span class="number">10</span>, <span class="string">'B'</span>))</span><br><span class="line">q.put((<span class="number">30</span>, <span class="string">'C'</span>))</span><br><span class="line"></span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="string">(10, 'B')</span></span><br><span class="line"><span class="string">(20, 'A')</span></span><br><span class="line"><span class="string">(30, 'C')</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šè¯·é˜…è¯»Pythonæ ‡å‡†åº“ç›®å½•ä¸‹çš„queueæ¨¡å—å†…å®¹</p>
<h2 id="Producer-Consumer-ğŸ€"><a href="#Producer-Consumer-ğŸ€" class="headerlink" title="Producer-Consumer  ğŸ€"></a>Producer-Consumer  ğŸ€</h2><p><strong>ç”Ÿäº§è€… - æ¶ˆè´¹è€…é—®é¢˜</strong>  </p>
<p>åˆç§°æœ‰ç•Œç¼“å†²åŒºé—®é¢˜ , åœ¨è¿›ç¨‹ä¸­ , ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªå…¬å…±çš„å›ºå®šå¤§å°çš„ç¼“å†²åŒº , å…¶ä¸­ä¸€ä¸ªæ˜¯ç”Ÿäº§è€… , å°†ä¿¡æ¯æ”¾å…¥ç¼“å†²åŒº ; å¦ä¸€ä¸ªæ˜¯æ¶ˆè´¹è€… , ä»ç¼“å†²åŒºå–å‡ºä¿¡æ¯ . é—®é¢˜åœ¨äºå½“ç¼“å†²åŒºæ»¡æ—¶ , è€Œæ­¤æ—¶ç”Ÿäº§è€…è¿˜æƒ³å‘å…¶ä¸­æ”¾å…¥ä¸€ä¸ªæ–°çš„æ•°æ®é¡¹çš„æƒ…å†µ ; ç›¸å , å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ , æ¶ˆè´¹è€…è§†å›¾ä»ç¼“å†²åŒºä¸­å–æ•°æ® , è¯¥å¦‚ä½•å»è§£å†³? </p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜äºæ˜¯å¼•å…¥äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ , åŸºæœ¬æ€è·¯ä¹Ÿæ˜¯å¦‚è¿›ç¨‹ä¸­ç¡çœ å’Œå”¤é†’</p>
<p><strong>ç”Ÿäº§è€…æ¶ˆè´¹æ¨¡å¼</strong> </p>
<p>é€šè¿‡ä¸€ä¸ªå®¹å™¨æ¥è§£å†³ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¼ºè€¦åˆé—®é¢˜ . ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å½¼æ­¤ä¹‹é—´ä¸ç›´æ¥é€šè®¯ , è€Œé€šè¿‡é˜»å¡é˜Ÿåˆ—æ¥è¿›è¡Œé€šè®¯ , æ‰€ä»¥ç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®ä¹‹åä¸ç”¨ç­‰å¾…æ¶ˆè´¹è€…å¤„ç† , ç›´æ¥æ‰”ç»™é˜»å¡é˜Ÿåˆ— , æ¶ˆè´¹è€…ä¸æ‰¾ç”Ÿäº§è€…è¦æ•°æ® , è€Œæ˜¯ç›´æ¥ä»é˜»å¡é˜Ÿåˆ—é‡Œå– , é˜»å¡é˜Ÿåˆ—å°±ç›¸å½“äºä¸€ä¸ªç¼“å†²åŒº , å¹³è¡¡äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›</p>
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ä½¿ç”¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼èƒ½è§£å†³ç»å¤§å¤šæ•°å¹¶å‘é—®é¢˜ , åœ¨çº¿ç¨‹ä¸–ç•Œé‡Œ , ç”Ÿäº§è€…å°±æ˜¯ç”Ÿäº§æ•°æ®çš„çº¿ç¨‹ , æ¶ˆè´¹è€…å°±æ˜¯æ¶ˆè´¹æ•°æ®çš„çº¿ç¨‹ . ä»¥ä¸‹æœ‰ä¸¤ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜çš„ä¾‹å­</p>
<p>åŸºç¡€ç‰ˆæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="comment"># è¿›è¡Œç”Ÿäº§,æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">        q.put(<span class="string">"%d bottle of milk"</span> % i)</span><br><span class="line">    print(<span class="string">"Start waiting for all the milk to be taken..."</span>)</span><br><span class="line">    q.join()</span><br><span class="line">    print(<span class="string">"All the milk was taken out..."</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="comment"># é˜Ÿåˆ—ä¸­æœ‰å°±å–</span></span><br><span class="line">    <span class="keyword">while</span> q.qsize() &gt; <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"%s got %s"</span> % (name, q.get()))</span><br><span class="line">        q.task_done()</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—å¯¹è±¡</span></span><br><span class="line">q = queue.Queue()</span><br><span class="line">p = threading.Thread(target=producer,)</span><br><span class="line">p.start()</span><br><span class="line">c1 = consumer(<span class="string">"Lyon"</span>)</span><br></pre></td></tr></table></figure>
<p>ç”Ÿäº§ä¸æ¶ˆè´¹åŒæ—¶è¿›è¡Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">q = queue.Queue()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Producer</span><span class="params">(name)</span>:</span></span><br><span class="line">  count = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> count &lt; <span class="number">20</span>:</span><br><span class="line">    time.sleep(random.randrange(<span class="number">3</span>))</span><br><span class="line">    <span class="comment"># å°†æ•°æ®æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">    q.put(count)</span><br><span class="line">    print(<span class="string">'Producer %s has produced %s bun...'</span> % (name, count))</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">  count = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> count &lt; <span class="number">20</span>:</span><br><span class="line">    time.sleep(random.randrange(<span class="number">4</span>))</span><br><span class="line">    <span class="comment"># ä¸ä¸ºç©ºå°±å–,ä¸ºç©ºå°±æç¤º</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> q.empty():</span><br><span class="line">        <span class="comment"># ä»é˜Ÿåˆ—ä¸­å–å‡ºä¿¡æ¯</span></span><br><span class="line">        data = q.get()</span><br><span class="line">        print(data)</span><br><span class="line">        print(<span class="string">'\033[32;1mConsumer %s has eat %s bun...\033[0m'</span> % (name, data))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"No bun anymore..."</span>)</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">p1 = threading.Thread(target=Producer, args=(<span class="string">'Lyon'</span>,))</span><br><span class="line">c1 = threading.Thread(target=Consumer, args=(<span class="string">'Kenneth'</span>,))</span><br><span class="line">p1.start()</span><br><span class="line">c1.start()</span><br></pre></td></tr></table></figure>
<h2 id="Semaphore-ğŸ€"><a href="#Semaphore-ğŸ€" class="headerlink" title="Semaphore  ğŸ€"></a>Semaphore  ğŸ€</h2><p>ä¿¡å·é‡(Semaphore) , å¼•å…¥ä¸€ä¸ªæ•´å‹å˜é‡æ¥ç´¯è®¡çº¿ç¨‹çš„å”¤é†’æ¬¡æ•° , threadingæ¨¡å—ä¸­ , æœ‰ä¸€ä¸ªSemaphoreç±»ç®¡ç†ä¸€ä¸ªå†…ç½®çš„è®¡æ•°å™¨ , æ¯å½“è°ƒç”¨acquire()æ—¶å†…ç½®è®¡æ•°å™¨ -1 ;è°ƒç”¨release()æ—¶å†…ç½®è®¡æ•°å™¨ +1;è®¡æ•°å™¨ä¸èƒ½å°äº0 ; å½“è®¡æ•°å™¨ç­‰äº0æ—¶ , acquire()å°†é˜»å¡çº¿ç¨‹çŸ¥é“å…¶ä»–çº¿ç¨‹è°ƒç”¨release()</p>
<p>ä¸€æ¬¡æœ€å¤šè¿æ¥5ä¸ªçº¿ç¨‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># å†…ç½®è®¡æ•°å™¨ -1</span></span><br><span class="line">    sm.acquire()</span><br><span class="line">    print(<span class="string">'%s get semaphores'</span> % threading.current_thread().getName())</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># å†…ç½®è®¡æ•°å™¨ +1</span></span><br><span class="line">    sm.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># ä¸€æ¬¡æœ€å¤šåªèƒ½æœ‰5ä¸ªçº¿ç¨‹è·å–ä¿¡å·é‡</span></span><br><span class="line">    sm = threading.Semaphore(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=func)</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ä¿¡å·é‡å¯ä»¥è§£å†³ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜ , ã€Šç°ä»£æ“ä½œç³»ç»Ÿä¸­ã€‹ä¸€ä¹¦ä¸­è¿›è¡Œäº†ç®€å•çš„å®ç°</p>
<h2 id="Event-ğŸ€"><a href="#Event-ğŸ€" class="headerlink" title="Event  ğŸ€"></a>Event  ğŸ€</h2><p>åœ¨å¤šçº¿ç¨‹ä¸­ , æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ , äº’ä¸å½±å“ , å¦‚æœæˆ‘ä»¬éœ€è¦é€šè¿‡æŸä¸ªçº¿ç¨‹çš„çŠ¶æ€æ¥æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ , æ˜¯éå¸¸éš¾çš„ . ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ , æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨threadingä¸­çš„Eventå¯¹è±¡æ¥å®ç°æˆ‘ä»¬çš„ç›®çš„</p>
<p>Eventå¯¹è±¡ä¸­åŒ…å«ä¸€ä¸ªå¯ç”±çº¿ç¨‹è®¾ç½®çš„ä¿¡å·æ ‡å¿— , å®ƒå…è®¸çº¿ç¨‹ç­‰å¾…æŸäº›äº‹ä»¶çš„å‘ç”Ÿ . åœ¨åˆå§‹æƒ…å†µä¸‹ , Eventå¯¹è±¡ä¸­çš„ä¿¡å·æ ‡å¿—è¢«è®¾ç½®ä¸ºå‡ ; å¦‚æœæœ‰çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªEventå¯¹è±¡ , è€Œè¿™ä¸ªEventå¯¹è±¡çš„æ ‡å¿—ä¸ºå‡ , é‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°†ä¼šè¢«ä¸€ç›´é˜»å¡ç›´è‡³è¯¥æ ‡å¿—ä¸ºçœŸ . ä¸€ä¸ªçº¿ç¨‹å¦‚æœå°†ä¸€ä¸ªEventå¯¹è±¡çš„ä¿¡å·æ ‡å¿—è®¾ç½®ä¸ºçœŸ , å®ƒå°†å”¤é†’æ‰€æœ‰ç­‰å¾…è¿™ä¸ªEventå¯¹è±¡çš„çº¿ç¨‹ . å¦‚æœä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ä¸€ä¸ªå·²ç»è¢«è®¾ç½®ä¸ºçœŸçš„Eventå¯¹è±¡ , é‚£ä¹ˆå®ƒå°†å¿½ç•¥è¿™ä¸ªäº‹ä»¶ , ç»§ç»­æ‰§è¡Œ</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Event.isSet()</td>
<td>è¿”å›Eventçš„çŠ¶æ€ , isSet == is_set</td>
</tr>
<tr>
<td>Event.wait()</td>
<td>å¦‚æœEvent.isSet() == Falseå°†é˜»å¡çº¿ç¨‹</td>
</tr>
<tr>
<td>Event.set()</td>
<td>è®¾ç½®Eventçš„çŠ¶æ€å€¼ä¸ºTrue , æ‰€æœ‰é˜»å¡æ± ä¸­çš„çº¿ç¨‹æ¿€æ´»è¿›å…¥å°±ç»ªçŠ¶æ€ , ç­‰å¾…æ“ä½œç³»ç»Ÿè°ƒåº¦</td>
</tr>
<tr>
<td>Event.clear()</td>
<td>å›å¤Eventçš„çŠ¶æ€å€¼ä¸ºFalse</td>
</tr>
</tbody>
</table>
<p>è§£å†³é‡å¤è¿æ¥é—®é¢˜</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_mysql</span><span class="params">()</span>:</span></span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> event.is_set():</span><br><span class="line">        <span class="comment"># å¤§äº3æ¬¡ä¸»åŠ¨è§¦å‘TimeoutError</span></span><br><span class="line">        <span class="keyword">if</span> count &gt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">raise</span> TimeoutError(<span class="string">'Connection timeout...'</span>)</span><br><span class="line">        print(<span class="string">'%s %sth attempt to connect'</span> % (threading.current_thread().getName(), count))</span><br><span class="line">        <span class="comment"># é˜»å¡0.5ç§’</span></span><br><span class="line">        event.wait(<span class="number">0.5</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    print(<span class="string">'%s connect successfully'</span> % threading.current_thread().getName())</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_mysql</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'%s is checking mysql'</span> % threading.current_thread().getName())</span><br><span class="line">    time.sleep(random.randint(<span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">    <span class="comment"># æ¿€æ´»çº¿ç¨‹</span></span><br><span class="line">    event.set()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    event = threading.Event()</span><br><span class="line">    conn1 = threading.Thread(target=conn_mysql)</span><br><span class="line">    conn2 = threading.Thread(target=conn_mysql)</span><br><span class="line">    check = threading.Thread(target=check_mysql)</span><br><span class="line">    conn1.start()</span><br><span class="line">    conn2.start()</span><br><span class="line">    check.start()</span><br></pre></td></tr></table></figure>
<h2 id="Condition-ğŸ€"><a href="#Condition-ğŸ€" class="headerlink" title="Condition  ğŸ€"></a>Condition  ğŸ€</h2><p>ä½¿çº¿ç¨‹ç­‰å¾… , åªæœ‰æ»¡è¶³æ¡ä»¶æ—¶ , æ‰é‡Šæ”¾çº¿ç¨‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">condition_func</span><span class="params">()</span>:</span></span><br><span class="line">    ret = <span class="keyword">False</span></span><br><span class="line">    inp = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="comment"># åªæœ‰å½“inpç­‰äº1æ—¶æ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">'1'</span>:</span><br><span class="line">        ret = <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(n)</span>:</span></span><br><span class="line">    con.acquire()</span><br><span class="line">    con.wait_for(condition_func)</span><br><span class="line">    print(<span class="string">"run the thread: %s"</span> %n)</span><br><span class="line">    con.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    con = threading.Condition()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>
<h2 id="Timer-ğŸ€"><a href="#Timer-ğŸ€" class="headerlink" title="Timer  ğŸ€"></a>Timer  ğŸ€</h2><p>threadingæ¨¡å—ä¸­è¿˜æœ‰ä¸€ä¸ªTimerç±» , å¯ä»¥æŒ‡å®šæ—¶é—´åæ‰§è¡ŒæŸæ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"I am Lyon"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"Hello, future"</span>)</span><br><span class="line"><span class="comment"># 1ç§’åæ‰§è¡Œ</span></span><br><span class="line">t1 = threading.Timer(<span class="number">1</span>, hello1)</span><br><span class="line"><span class="comment"># ä¸¤ç§’åæ‰§è¡Œ</span></span><br><span class="line">t2 = threading.Timer(<span class="number">2</span>,hello2)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    
   
    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

  <!-- JSåº“ sweetalert å¯ä¿®æ”¹è·¯å¾„ -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/">41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹</a></p>
  <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® Jesse çš„ä¸ªäººåšå®¢">Jesse</a></p>
  <p><span>å‘å¸ƒæ—¶é—´:</span>2020å¹´06æœˆ26æ—¥ - 09:06</p>
  <p><span>æœ€åæ›´æ–°:</span>2020å¹´06æœˆ30æ—¥ - 20:06</p>
  <p><span>åŸå§‹é“¾æ¥:</span><a href="/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/" title="41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹">https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/</a>
    <span class="copy-path"  title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard" data-clipboard-text="https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/"  aria-label="å¤åˆ¶æˆåŠŸï¼"></i></span>
  </p>
  <p><span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç¦æ­¢å•†ä¸šç”¨é€”</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: 'å¤åˆ¶æˆåŠŸ',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>

      
    </div>

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>æ‰“èµ</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Jesse å¾®ä¿¡æ”¯ä»˜"/>
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Jesse æ”¯ä»˜å®"/>
        <p>æ”¯ä»˜å®</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/26/python/06-Concurrent/01-Pythonä¹‹è·¯ - è¿›ç¨‹ä¸çº¿ç¨‹/" rel="next" title="40.Pythonä¹‹è·¯ - è¿›ç¨‹ä¸çº¿ç¨‹">
                <i class="fa fa-chevron-left"></i> 40.Pythonä¹‹è·¯ - è¿›ç¨‹ä¸çº¿ç¨‹
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/06/26/python/06-Concurrent/04-Pythonä¹‹è·¯ - å¤šè¿›ç¨‹å®ä¾‹åŠå›è°ƒå‡½æ•°/" rel="prev" title="43.Pythonä¹‹è·¯ - å¤šè¿›ç¨‹å®ä¾‹åŠå›è°ƒå‡½æ•°">
                43.Pythonä¹‹è·¯ - å¤šè¿›ç¨‹å®ä¾‹åŠå›è°ƒå‡½æ•° <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div class="ds-thread" data-thread-key="2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/"
           data-title="41.Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹" data-url="https://jesse.top/2020/06/26/python/06-Concurrent/02-Pythonä¹‹è·¯ - å¹¶å‘ç¼–ç¨‹ä¹‹å¤šçº¿ç¨‹/">
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.png"
                alt="Jesse" />
            
              <p class="site-author-name" itemprop="name">Jesse</p>
              <p class="site-description motion-element" itemprop="description">æ±‚çŸ¥è‹¥é¥¥,è™šå¿ƒè‹¥æ„š.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">208</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Pythonä¹‹è·¯-å¤šçº¿ç¨‹ç¼–ç¨‹"><span class="nav-number">1.</span> <span class="nav-text">Pythonä¹‹è·¯ - å¤šçº¿ç¨‹ç¼–ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å‰è¨€-ğŸ€"><span class="nav-number">1.1.</span> <span class="nav-text">å‰è¨€  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Threading-ğŸ€"><span class="nav-number">1.2.</span> <span class="nav-text">Threading  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Thread-ğŸ€"><span class="nav-number">1.3.</span> <span class="nav-text">Thread  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Join-amp-setDaemon-ğŸ€"><span class="nav-number">1.4.</span> <span class="nav-text">Join &amp; setDaemon  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python-GIL-ğŸ€"><span class="nav-number">1.5.</span> <span class="nav-text">Python GIL  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RLock-ğŸ€"><span class="nav-number">1.6.</span> <span class="nav-text">RLock  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#queue-ğŸ€"><span class="nav-number">1.7.</span> <span class="nav-text">queue  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Producer-Consumer-ğŸ€"><span class="nav-number">1.8.</span> <span class="nav-text">Producer-Consumer  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Semaphore-ğŸ€"><span class="nav-number">1.9.</span> <span class="nav-text">Semaphore  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-ğŸ€"><span class="nav-number">1.10.</span> <span class="nav-text">Event  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Condition-ğŸ€"><span class="nav-number">1.11.</span> <span class="nav-text">Condition  ğŸ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Timer-ğŸ€"><span class="nav-number">1.12.</span> <span class="nav-text">Timer  ğŸ€</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; Tue Jun 12 2018 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jesse</span>

  
</div>

<!--

  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

-->



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"comments"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '3CtYiIp3Dijlw0XHyLxqMUM0-gzGzoHsz',
        appKey: '6dleF8bCPBg8gTr0pBp1IgVe',
        placeholder: 'æ¬¢è¿ç•™è¨€äº¤æµ',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
